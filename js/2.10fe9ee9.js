"use strict";(self["webpackChunkjust_sell"]=self["webpackChunkjust_sell"]||[]).push([[2],{2729:function(e,a,o){o.d(a,{Z:function(){return h}});var t=o(3396),s=o(7139),n=o(9167);const c=["checked","name","disabled"],i={key:0,for:"#checkbox-field",class:"checkbox-field__label"},l={id:"checkbox-field",class:"checkbox-field__box"},r={key:0,src:n,alt:"Checked"},d={key:0,class:"form-field__error"},m=(0,t.aZ)({emits:["change","update:modelValue"],data(){return{checked:this.$props.modelValue}},computed:{hasError(){return Boolean(this.$props.error)}},watch:{modelValue:{handler(e){this.checked="string"===typeof e?JSON.parse(e):e},immediate:!0}},methods:{check(){this.checked=!this.checked,this.$emit("change",this.checked),this.$emit("update:modelValue",this.checked)}}});var p=(0,t.aZ)({...m,__name:"CheckboxField",props:{name:null,label:null,defaultChecked:{type:Boolean},direction:{default:"right"},variant:{default:"primary"},size:{default:"md"},modelValue:{type:Boolean},disabled:null,error:null,justify:{default:"space-between"}},setup(e){return(a,o)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("input",{type:"checkbox",class:"checkbox-field__input",checked:e.modelValue||a.checked,name:e.name,disabled:e.disabled},null,8,c),(0,t._)("div",{class:(0,s.C_)(["checkbox-field",{"checkbox-field--checked":a.checked,"checkbox-field--disabled":e.disabled,[`checkbox-field--${e.direction}`]:!0,[`checkbox-field--${e.variant}`]:!0,[`checkbox-field--${e.size}`]:!0}]),style:(0,s.j5)({justifyContent:"space-between"===e.justify?"space-between":"flex-start"}),onClick:o[0]||(o[0]=(...e)=>a.check&&a.check(...e))},[Boolean(e.label)?((0,t.wg)(),(0,t.iD)("label",i,(0,s.zw)(e.label),1)):(0,t.kq)("",!0),(0,t._)("div",l,[a.checked?((0,t.wg)(),(0,t.iD)("img",r)):(0,t.kq)("",!0)])],6),a.hasError?((0,t.wg)(),(0,t.iD)("div",d,(0,s.zw)(e.error),1)):(0,t.kq)("",!0)],64))}});const u=p;var h=u},745:function(e,a,o){o.d(a,{Z:function(){return Q}});var t=o(3396);const s={class:"map-container"},n={id:"map",ref:"map"},c={class:"places-container"},i={key:0,type:"text",ref:"placesAutocomplete",class:"form-field__input--default"},l={class:"places-list"},r={key:0,class:"marker-checkbox-container"};function d(e,a,o,d,m,p){const u=(0,t.up)("checkbox-field"),h=(0,t.up)("place-item");return(0,t.wg)(),(0,t.iD)("div",s,[(0,t._)("div",n,null,512),(0,t._)("div",c,[e.hasAddressAutocomplete?((0,t.wg)(),(0,t.iD)("input",i,null,512)):(0,t.kq)("",!0),(0,t._)("div",l,[e.hasAnimatedMarker?((0,t.wg)(),(0,t.iD)("div",r,[(0,t.Wm)(u,{label:"Відображати переміщення ТЗ",name:"iconVisible",modelValue:e.showBusIcon,"onUpdate:modelValue":a[0]||(a[0]=a=>e.showBusIcon=a)},null,8,["modelValue"])])):(0,t.kq)("",!0),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.places,((a,o)=>((0,t.wg)(),(0,t.j4)(h,{key:a.name,name:a.name,index:o,moveUpDisabled:0===o,moveDownDisabled:o===e.places.length-1,hasActions:e.hasPlaceActions,onMoveUp:e.moveUp,onMoveDown:e.moveDown,onRemove:e.removeItem},null,8,["name","index","moveUpDisabled","moveDownDisabled","hasActions","onMoveUp","onMoveDown","onRemove"])))),128))])])])}o(7658);let m=[];const p=async(e,a,o,t=.25,s=100)=>new Promise((n=>{const c=(o.lat()-a.lat())/s,i=(o.lng()-a.lng())/s,l=10*t;let r=0;for(let a=0;a<s;a++)(function(a){const o=setTimeout((function(){m.push(o);const a=e.position.lat()+c,t=e.position.lng()+i;e.setPosition(new window.google.maps.LatLng(a,t)),r++,r===s&&(u(),n({marker:e,timeouts:m}))}),l*a)})(a)})),u=async()=>(console.log("start",m),new Promise((e=>{m.forEach((e=>{clearTimeout(e)})),m=[],console.log("end",m),e(!0)})));let h,g,k,v;const w=async e=>{const{Marker:a}=await google.maps.importLibrary("marker");k=new a({icon:o(9210),optimized:!1,zIndex:99,map:e})},f=async(e,a,{onPlaceChanged:o,places:t})=>{const{Map:s}=await google.maps.importLibrary("maps");h=new google.maps.DirectionsService,g=new google.maps.DirectionsRenderer;const n=await b();return v=new s(e,{center:n,zoom:5}),A(a,n,{onPlaceChanged:o}),g.setMap(v),w(v),v},b=async()=>{const{Geocoder:e}=await google.maps.importLibrary("geocoding"),a=new e,{results:o}=await a.geocode({address:"Ukraine"});if(!o.length)return{lat:-34.397,lng:150.644};const t=o[0];return t.geometry.location},A=async(e,a,{onPlaceChanged:o})=>{const{Autocomplete:t}=await google.maps.importLibrary("places"),s={north:a.lat+.1,south:a.lat-.1,east:a.lng+.1,west:a.lng-.1},n={bounds:s,strictBounds:!0},c=new t(e,n);c.setFields(["place_id","geometry","name"]),c.addListener("place_changed",(()=>{const e=c.getPlace();o(e)}))},y=({places:e=[],animatedMarker:a})=>{if(!h||!g)return;if(!e||!e.length)return;const o=e[0],t=e[e.length-1],s=e.length>2?e.slice(1,e.length-1).map((e=>({location:e.geometry.location,stopover:!0}))):[],n={origin:o.geometry.location,destination:t.geometry.location,waypoints:s,travelMode:"DRIVING"};h.route(n,(function(e,o){if("OK"==o){const o=e?.routes[0].overview_path;g.setDirections(e),a&&M(o)}}))},_=e=>{e?k.setMap(v):k.setMap(null)},M=async e=>{if(!e)return;k.setPosition(e[0]);const a=await u();if(a)for(let o=0;o<e.length;o++){const a=e[o];await p(k,k.getPosition(),a)}},x=(e,a,o)=>{const t=e[a],s=e[o];return console.log(t),console.log(s),e[a]=s,e[o]=t,e};var D=o(2729),B=o(7139),j=o.p+"img/arrow-long-up.789f1f9b.svg",C=o.p+"img/arrow-long-down.b1761689.svg",V=o.p+"img/trash.55c26e0e.svg";const I=e=>((0,t.dD)("data-v-3f3fffaa"),e=e(),(0,t.Cn)(),e),W={class:"place-item"},K={class:"place-item__text"},L={key:0,class:"place-item__actions"},R=I((()=>(0,t._)("img",{src:j,alt:""},null,-1))),U=[R],F=I((()=>(0,t._)("img",{src:C,alt:""},null,-1))),z=[F],E=I((()=>(0,t._)("img",{src:V,alt:""},null,-1))),Z=[E];function Y(e,a,o,s,n,c){return(0,t.wg)(),(0,t.iD)("div",W,[(0,t._)("span",K,(0,B.zw)(e.name),1),e.hasActions?((0,t.wg)(),(0,t.iD)("div",L,[(0,t._)("div",{class:(0,B.C_)(["place-item__action",e.moveUpDisabled?"place-item__disabled":""]),onClick:a[0]||(a[0]=a=>e.$emit("move-up",e.index))},U,2),(0,t._)("div",{class:(0,B.C_)(["place-item__action",e.moveDownDisabled?"place-item__disabled":""]),onClick:a[1]||(a[1]=a=>e.$emit("move-down",e.index))},z,2),(0,t._)("div",{class:"place-item__action",onClick:a[2]||(a[2]=a=>e.$emit("remove",e.index))},Z)])):(0,t.kq)("",!0)])}var P=(0,t.aZ)({emits:["move-up","move-down","remove"],props:["name","index","moveUpDisabled","moveDownDisabled","hasActions"]}),S=o(89);const H=(0,S.Z)(P,[["render",Y],["__scopeId","data-v-3f3fffaa"]]);var T=H,X=(0,t.aZ)({emits:["update:modelValue"],props:["modelValue","hasAddressAutocomplete","hasPlaceActions","hasAnimatedMarker"],components:{PlaceItem:T,CheckboxField:D.Z},data(){return{places:[],showBusIcon:!0}},async mounted(){const e=this.$refs.map,a=this.$refs.placesAutocomplete;await f(e,a,{onPlaceChanged:this.onAddressSelected}),setTimeout((()=>{y({places:this.places,animatedMarker:this.hasAnimatedMarker})}),500)},watch:{modelValue:{handler(e){this.places=e||[]},immediate:!0},showBusIcon:{handler(e){_(e)}},places:{handler(e){y({places:e,animatedMarker:this.hasAnimatedMarker})},deep:!0}},methods:{onAddressSelected(e){this.places=[...this.places,e],this.$emit("update:modelValue",this.places)},moveUp(e){this.places=x(this.places,e,e-1)},moveDown(e){this.places=x(this.places,e,e+1)},removeItem(e){this.places=this.places.filter(((a,o)=>o!==e))}}});const q=(0,S.Z)(X,[["render",d],["__scopeId","data-v-199751a2"]]);var Q=q},9167:function(e,a,o){e.exports=o.p+"img/check-icon.972bc3c4.svg"},9210:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEBUlEQVR4nO2Wy2/jVBSH8xfwF8CW8pqWTtMkbZLm0TzsJs7Djms3aRynM0qbeUgMC9AsZoFG0BkQEi8hVWyQumHYIFZs2bGYHWJRUYnFFHUSkkmmXbEpB93r+MauX8k0RUHykT4p8uL4O87vHtvjccstt9xyyy233HLr/18na3zmhOb/PF3j4ZRWKcEppYWDk7SGFKsnWSQ8TyAKQ1YR+SFxRA7Tj6kwmF6E+bsXzT7uRzKl0Qeg+aORpNPW0or4i0n3oypZ6EeG9CKZWyMNoIrfL1dBlmWo1WoYSZII1WoVs7m5SahUKoRyuYzZ2NggiKKIEQSBsL6+TuB5HlMqlQgcx2FEjoN3coWzbyhm1nkAqoSf8KjCquwkhVmWJRSLRcJ9mvnZOUKDiIwjrMpaCauy4wgXCgVCPp/HVJjc2T5FvWQ/wCDTkxZWZccRzuVyBIZhMJ8ks1/bD5BUDuS9kmArbBYHJ2FtHEYVzmazhEwmAx8k6Y7DAA6rL26zRaLWW6QfyUBvRUN4bUiIJjwLIiiFZURaYQmRgmeBFHQDKZ/lAJNcffbSGvGggzQRT0LXn4SuL7FvPcBA+B4v6lbjNHFbEP/5LpWZMx9gEBHt4Z1GPmZY85WqRkR7cKeRayX+7HOfyUpVc61dj9PKZ3TOuFLVw3i3wOnW4zTyLlPsGwfQfkCtjLr6KM0Wsdogmi2CSaBtgmn5EvBLKA0PKQYEdvj+cEJkWTAZYKL72lK661uF7uIqdBDeOOEPXxz2YzRczxd0b2wrDAMYpMMX2NcW0or4ULrjjUFnYcBVRBSOF6LwUygFd6ms7q19HuMAdhFxkg6YSSc00vqnTaQXFGnEX/OIiMLbiBV47IvDp3EKOIbRfW4gjANMKNdjSV81SmPmEGFMezYMh/Mr8G04AbW1LPlWMgwwsVwvjiE9rxGfG4ojaYUQtK+oBOH4Sgh+9MfgViJtMsAl5lqRtn/abQvp9lsqy9B6U2XJZACHXB8GKXjAVUGubWM+KlXhtyA1dq7NInLgjcFuoQKytI35sFiBX71xLN0m0svQemOJYBjALiKHy2m4Jm2DWG/q2JIa8Hsg9UK5xk96NgQHCzHYqjYMvetSAw7mIzrp1usBgmGAjj9xZJXrXXYTN71553344suvMOg3uvaQrVwo17v5smXvB/kNnXTrNT88Rcz4nxgj5I3TncXVI7Nco8ighqj53t4eBv1G1+Ra40K5liWb3lJjKK2Iw9MZ35PjVxcpzzglys1Tq5uIcvP5WM3+w96khPrOD+f/5ht33sM3EeTmI8+U9ibFb+3MCPVm7/xBE+o73cr12y97prS3rgS5+YpYb34v1HdOMHLz0aRuIFxib7fccsstz6XWv2KhyEq2pCy2AAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=2.10fe9ee9.js.map