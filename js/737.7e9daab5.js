"use strict";(self["webpackChunkjust_sell"]=self["webpackChunkjust_sell"]||[]).push([[737],{2375:function(e,l,a){a.d(l,{Cb:function(){return d},oh:function(){return n},zo:function(){return r}});var t=a(7736),o=a(7629);const r=(0,o.Ry)({terminal_id:(0,o.Z_)().required(t.r.REQUIRED_FIELD),can_offline:(0,o.O7)().required(t.r.REQUIRED_FIELD),can_user_reversal:(0,o.O7)().required(t.r.REQUIRED_FIELD),callback_req_type:(0,o.Z_)().required(t.r.REQUIRED_FIELD),callback_type:(0,o.Z_)().required(t.r.REQUIRED_FIELD),inShifts:(0,o.O7)().required(t.r.REQUIRED_FIELD)}),n=(0,o.Ry)({id:(0,o.Z_)().required(t.r.REQUIRED_FIELD),secret_key:(0,o.Z_)().required(t.r.REQUIRED_FIELD)}),d=(0,o.Ry)({secret_key:(0,o.Z_)().required(t.r.REQUIRED_FIELD),req_type:(0,o.Z_)().required(t.r.REQUIRED_FIELD),settings:(0,o.Z_)().required(t.r.REQUIRED_FIELD),sync_type:(0,o.Z_)().required(t.r.REQUIRED_FIELD),max_offline_sum:(0,o.Rx)().required(t.r.REQUIRED_FIELD).min(1,t.r.MIN_NUMBER),endpoint_result:(0,o.Z_)().required(t.r.REQUIRED_FIELD),payload:(0,o.Z_)().required(t.r.REQUIRED_FIELD),sign_stract:(0,o.Z_)().required(t.r.REQUIRED_FIELD),card_wait:(0,o.Rx)().required(t.r.REQUIRED_FIELD).min(1,t.r.MIN_NUMBER),sync_period:(0,o.Rx)().required(t.r.REQUIRED_FIELD).min(1,t.r.MIN_NUMBER)})},6806:function(e,l,a){a.d(l,{Z:function(){return m}});var t=a(3396);function o(e,l,a,o,r,n){const d=(0,t.up)("select-field"),i=(0,t.up)("form-field");return(0,t.wg)(),(0,t.j4)(i,{label:"Компанії"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{options:e.companies,name:"companies","input-placeholder":"Оберіть компанію","search-placeholder":"Введіть компанію","has-search":!1,"model-value":e.modelValue,"onUpdate:modelValue":e.select,size:"sm",disabled:e.disabled},null,8,["options","model-value","onUpdate:modelValue","disabled"])])),_:1})}a(541);var r=a(4560),n=a(6112),d=(0,t.aZ)({props:{modelValue:String,small:{type:Boolean,required:!1},disabled:{required:!1}},emits:["update:modelValue","blur"],components:{FormField:r.Z,SelectField:n.Z},computed:{companies(){const e=this.$store.state.terminals.terminalsRef;if(!e)return[];const l=e.parent_child.map((e=>({value:e.id.toString(),label:e.name||""})));return l.unshift({value:"",label:"Не обрано"}),l}},methods:{select(e){this.$emit("update:modelValue",e),this.$emit("blur",e)}}}),i=a(89);const u=(0,i.Z)(d,[["render",o]]);var m=u},2195:function(e,l,a){a.d(l,{Z:function(){return F}});var t=a(3396),o=a(9242),r=a(7139),n=a.p+"img/chevron-top.161f73c2.svg",d=a.p+"img/chevron-bottom.4aa9eec8.svg";const i={class:"timepicker",ref:"timepicker"},u=(0,t._)("h4",{class:"timepicker-dropdown__title"},"Оберіть час",-1),m={class:"timepicker-dropdown__row"},s={class:"timepicker-dropdown__values"},c=(0,t._)("img",{src:n,alt:"Top",class:"timepicker-dropdown__icon"},null,-1),p=[c],_={class:"timepicker-dropdown__value"},f=(0,t._)("img",{src:d,alt:"Bottom",class:"timepicker-dropdown__icon"},null,-1),h=[f],V=(0,t._)("div",{class:"timepicker-dropdown__delimetr"},":",-1),b={class:"timepicker-dropdown__values"},v={class:"timepicker-dropdown__value"};function U(e,l,a,c,f,U){const k=(0,t.up)("form-field"),y=(0,t.Q2)("click-outside");return(0,t.wg)(),(0,t.j4)(k,{label:e.label},{default:(0,t.w5)((()=>[(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",i,[(0,t._)("div",{class:"timepicker-field",onClick:l[1]||(l[1]=(...l)=>e.toggle&&e.toggle(...l))},[(0,t.wy)((0,t._)("input",{type:"text",name:"time",class:"timepicker-field__input","onUpdate:modelValue":l[0]||(l[0]=l=>e.time=l),readonly:""},null,512),[[o.nr,e.time]])]),(0,t._)("div",{class:(0,r.C_)(["timepicker-dropdown",{opened:e.opened}])},[u,(0,t._)("div",m,[(0,t._)("div",s,[(0,t._)("div",{class:"timepicker-dropdown__icon",onClick:l[2]||(l[2]=l=>e.increment("hour"))},p),(0,t._)("div",_,(0,r.zw)(e.formattedHour),1),(0,t._)("div",{class:"timepicker-dropdown__icon",onClick:l[3]||(l[3]=l=>e.decrement("hour"))},h)]),V,(0,t._)("div",b,[(0,t._)("img",{src:n,alt:"Top",class:"timepicker-dropdown__icon",onClick:l[4]||(l[4]=l=>e.increment("minuts"))}),(0,t._)("div",v,(0,r.zw)(e.formattedMinuts),1),(0,t._)("img",{src:d,alt:"Bottom",class:"timepicker-dropdown__icon",onClick:l[5]||(l[5]=l=>e.decrement("minuts"))})])])],2)])),[[y,e.close]])])),_:1},8,["label"])}var k=a(4560);const y=23,g=58,w=e=>e<9?`0${e+1}`:`${e+1}`;var E=(0,t.aZ)({emits:["update:modelValue"],props:["modelValue","label"],components:{FormField:k.Z},data(){return{opened:!1,hour:0,minuts:0,time:"00:00"}},computed:{formattedHour(){return w(this.hour)},formattedMinuts(){return w(this.minuts)}},watch:{hour(){this.time=this.formattedHour+":"+this.formattedMinuts,this.$emit("update:modelValue",this.time)},minuts(){this.time=this.formattedHour+":"+this.formattedMinuts,this.$emit("update:modelValue",this.time)}},methods:{increment(e){const l=this[e],a="hour"===e&&l<y,t="minuts"===e&&l<g;(a||t)&&(this[e]=l+1)},decrement(e){const l=this[e];l>0&&(this[e]=l-1)},toggle(){this.opened=!this.opened},close(){this.opened=!1}}}),Z=a(89);const R=(0,Z.Z)(E,[["render",U]]);var F=R},6235:function(e,l,a){a.d(l,{Z:function(){return m}});var t=a(3396);function o(e,l,a,o,r,n){const d=(0,t.up)("select-field"),i=(0,t.up)("form-field");return(0,t.wg)(),(0,t.j4)(i,{label:"Тип встановлення",error:e.error},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{options:e.allocTypes,name:"syncTypes","input-placeholder":"Оберіть тип встановлення","search-placeholder":"Введіть тип встановлення","has-search":!1,"model-value":e.value,"onUpdate:modelValue":e.select},null,8,["options","model-value","onUpdate:modelValue"])])),_:1},8,["error"])}a(7658);var r=a(4560),n=a(6112),d=(0,t.aZ)({props:{modelValue:String,error:String},emits:["update:modelValue"],components:{FormField:r.Z,SelectField:n.Z},data(){return{value:""}},computed:{allocTypes(){const e=this.$store.state.terminals.terminalsRef;if(!e)return[];const l=e.alloc_type.map((e=>({value:e.id.toString(),label:e.name||""})));return l.push({label:"Не вибрано",value:""}),l}},watch:{modelValue:{handler(e){if(Number.isNaN(parseInt(e)))return this.value=this.allocTypes.find((l=>l.label===e))?.value||"",void this.$emit("update:modelValue",this.value);this.value=e},immediate:!0}},methods:{select(e){this.$emit("update:modelValue",e)}}}),i=a(89);const u=(0,i.Z)(d,[["render",o]]);var m=u},5375:function(e,l,a){a.d(l,{Z:function(){return m}});var t=a(3396);function o(e,l,a,o,r,n){const d=(0,t.up)("select-field"),i=(0,t.up)("form-field");return(0,t.wg)(),(0,t.j4)(i,{label:e.label||"Тип запиту",error:e.error},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{options:e.types,name:"callback_type","input-placeholder":"Оберіть тип запиту","search-placeholder":"Введіть тип запиту","model-value":e.modelValue,"onUpdate:modelValue":e.select,"has-search":!1},null,8,["options","model-value","onUpdate:modelValue"])])),_:1},8,["label","error"])}var r=a(4560),n=a(6112),d=(0,t.aZ)({props:{modelValue:String,label:String,error:String},emits:["update:modelValue"],components:{FormField:r.Z,SelectField:n.Z},data(){return{types:[{value:"POST",label:"POST"},{value:"GET",label:"GET"}]}},methods:{select(e){this.$emit("update:modelValue",e)}}}),i=a(89);const u=(0,i.Z)(d,[["render",o]]);var m=u},4887:function(e,l,a){a.d(l,{Z:function(){return m}});var t=a(3396);function o(e,l,a,o,r,n){const d=(0,t.up)("select-field"),i=(0,t.up)("form-field");return(0,t.wg)(),(0,t.j4)(i,{label:e.label||"Тип запиту",error:e.error},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{options:e.types,name:"callback_req_type","input-placeholder":"Оберіть тип запиту","search-placeholder":"Введіть тип запиту","model-value":e.modelValue,"onUpdate:modelValue":e.select,"has-search":!1},null,8,["options","model-value","onUpdate:modelValue"])])),_:1},8,["label","error"])}var r=a(4560),n=a(6112),d=(0,t.aZ)({props:{modelValue:String,label:String,error:String},emits:["update:modelValue"],components:{FormField:r.Z,SelectField:n.Z},data(){return{types:[{value:"json",label:"JSON"},{value:"xml",label:"XML"},{value:"x-www-form",label:"X-WWW-FORM"}]}},methods:{select(e){this.$emit("update:modelValue",e)}}}),i=a(89);const u=(0,i.Z)(d,[["render",o]]);var m=u},6014:function(e,l,a){a.r(l),a.d(l,{default:function(){return M}});var t=a(3396);function o(e,l,a,o,r,n){const d=(0,t.up)("app-loading"),i=(0,t.up)("terminal-form"),u=(0,t.up)("app-layout");return(0,t.wg)(),(0,t.j4)(u,null,(0,t.Nv)({appTitle:(0,t.w5)((()=>[(0,t.Uk)("Редагування термінала")])),appLoading:(0,t.w5)((()=>[(0,t.Wm)(d,{loading:e.loading},null,8,["loading"])])),appContent:(0,t.w5)((()=>[Boolean(e.terminal)&&!e.loading?((0,t.wg)(),(0,t.j4)(i,{key:0,configData:e.configData,"actions-fixed":!0,terminal:e.terminal},null,8,["configData","terminal"])):(0,t.kq)("",!0)])),_:2},[e.canEdit?void 0:{name:"appSubtitle",fn:(0,t.w5)((()=>[(0,t.Uk)("Ви не маєте прав для редагування налаштувань терміналу")])),key:"0"}]),1024)}var r=a(5627),n=a(7139);const d={class:"checkbox-container"},i={class:"checkbox-container"},u={class:"checkbox-container"};function m(e,l,a,o,r,m){const s=(0,t.up)("input-field"),c=(0,t.up)("form-field"),p=(0,t.up)("status-select"),_=(0,t.up)("checkbox-field"),f=(0,t.up)("alloc-type-field"),h=(0,t.up)("request-method-select"),V=(0,t.up)("payload-field"),b=(0,t.up)("request-type-select"),v=(0,t.up)("textarea-field"),U=(0,t.up)("sign-stract-field"),k=(0,t.up)("timepicker-field"),y=(0,t.up)("companies-select"),g=(0,t.up)("v-button"),w=(0,t.up)("v-form");return(0,t.wg)(),(0,t.j4)(w,{"class-names":"terminal-form","initial-values":e.values,schema:e.editTerminalSchema,onSubmit:e.editConfig},{fields:(0,t.w5)((({values:a,errors:o})=>[(0,t.Wm)(c,{label:"ID терміналу",error:o.terminal_id},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:a.terminal_id,"onUpdate:modelValue":e=>a.terminal_id=e,name:"terminal_id",type:"text",placeholder:"Введіть id термінала"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["error"]),(0,t.Wm)(c,{label:"Назва терміналу"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,name:"name",type:"text",placeholder:"Введіть назву термінала"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(c,{label:"Адреса"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:a.address,"onUpdate:modelValue":e=>a.address=e,name:"address",type:"string",placeholder:"Введіть адресу"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(p,{modelValue:a.status,"onUpdate:modelValue":e=>a.status=e},null,8,["modelValue","onUpdate:modelValue"]),(0,t._)("div",d,[(0,t.Wm)(_,{name:"can_offline",modelValue:a.can_offline,"onUpdate:modelValue":e=>a.can_offline=e,label:"Чи працює термінал оффлайн",error:o.can_offline},null,8,["modelValue","onUpdate:modelValue","error"])]),(0,t.Wm)(c,{label:"Максимальна сума для оффлайн платежу"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:a.max_offline_sum,"onUpdate:modelValue":e=>a.max_offline_sum=e,name:"max_offline_sum",type:"number",placeholder:"Введіть максимальну суму для оффлайн платежу"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t._)("div",i,[(0,t.Wm)(_,{name:"can_user_reversal",modelValue:a.can_user_reversal,"onUpdate:modelValue":e=>a.can_user_reversal=e,label:"Чи може користувач робити відміну",error:o.can_user_reversal},null,8,["modelValue","onUpdate:modelValue","error"])]),(0,t.Wm)(f,{modelValue:a.allocation_type,"onUpdate:modelValue":e=>a.allocation_type=e},null,8,["modelValue","onUpdate:modelValue"]),"1"===a.allocation_type?((0,t.wg)(),(0,t.j4)(c,{key:0,label:"Ідентифікатор ПТКС",error:o.ptks_num},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:a.ptks_num,"onUpdate:modelValue":e=>a.ptks_num=e,name:"ptks_num",type:"number",placeholder:"Введіть ідентифікатор ПТКС"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["error"])):(0,t.kq)("",!0),(0,t.Wm)(c,{label:"URL-адреса зворотного виклику"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:a.callback_url,"onUpdate:modelValue":e=>a.callback_url=e,name:"callback_url",placeholder:"Наприклад, https://example.com/callback"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(h,{label:"Тип запиту зворотного виклику",modelValue:a.callback_type,"onUpdate:modelValue":e=>a.callback_type=e,error:o.callback_type},null,8,["modelValue","onUpdate:modelValue","error"]),(0,t.Wm)(V,{modelValue:a.callback_req_tmpl,"onUpdate:modelValue":e=>a.callback_req_tmpl=e,label:"Шаблон зворотного виклику"},null,8,["modelValue","onUpdate:modelValue"]),(0,t.Wm)(b,{label:"Тип зворотного виклику",modelValue:a.callback_req_type,"onUpdate:modelValue":e=>a.callback_req_type=e,error:o.callback_req_type},null,8,["modelValue","onUpdate:modelValue","error"]),(0,t.Wm)(c,{label:"Заголовки зворотного виклику"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:a.callback_headers,"onUpdate:modelValue":e=>a.callback_headers=e,name:"headers",placeholder:"Наприклад, Content-type: application/json; Host:example.it"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(U,{modelValue:e.sign_stract,"onUpdate:modelValue":l[0]||(l[0]=l=>e.sign_stract=l)},null,8,["modelValue"]),(0,t.Wm)(c,{label:"Час тайм-ауту, в секундах"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:a.timeout,"onUpdate:modelValue":e=>a.timeout=e,name:"timeout",placeholder:"Наприклад, 30",type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(c,{label:"Час повторної відправки, в секундах"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:a.resendPeriod,"onUpdate:modelValue":e=>a.resendPeriod=e,name:"resendPeriod",placeholder:"Наприклад, 30",type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t._)("div",u,[(0,t.Wm)(_,{modelValue:a.inShifts,"onUpdate:modelValue":e=>a.inShifts=e,name:"inShifts",label:"Необхідне відкриття зміни",error:o.inShifts},null,8,["modelValue","onUpdate:modelValue","error"])]),(0,t.Wm)(c,{label:"Час відкриття зміни"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{modelValue:a.shift_start,"onUpdate:modelValue":e=>a.shift_start=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(c,{label:"Час закриття зміни"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{modelValue:a.shift_end,"onUpdate:modelValue":e=>a.shift_end=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(c,{label:"Перелік сум на терміналі"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:a.amount_list,"onUpdate:modelValue":e=>a.amount_list=e,placeholder:"Наприклад, 1000|3000"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(y,{modelValue:a.company_id,"onUpdate:modelValue":e=>a.company_id=e},null,8,["modelValue","onUpdate:modelValue"]),(0,t.Wm)(c,{label:"Додаткова інформація"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{modelValue:a.dop_info,"onUpdate:modelValue":e=>a.dop_info=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t._)("div",{class:(0,n.C_)(["form-actions",{"form-actions--fixed":e.actionsFixed}])},[(0,t.Wm)(g,{type:"submit",loading:e.loading,fixed:""},{text:(0,t.w5)((()=>[(0,t.Uk)("Редагувати")])),_:1},8,["loading"])],2)])),_:1},8,["initial-values","schema","onSubmit"])}var s=a(4677),c=a(4856),p=a(4560),_=a(2619),f=a(2729),h=a(6686),V=a(913),b=a(4610),v=a(2195),U=a(6806);function k(e,l,a,o,r,n){const d=(0,t.up)("select-field"),i=(0,t.up)("form-field");return(0,t.wg)(),(0,t.j4)(i,{label:"Статус",small:e.small,shadow:""},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{options:e.statuses,name:"syncTypes","input-placeholder":"Оберіть статус","search-placeholder":"Введіть статус","has-search":!1,"model-value":e.modelValue,"onUpdate:modelValue":e.select,size:e.small?"sm":"md",disabled:e.disabled},null,8,["options","model-value","onUpdate:modelValue","size","disabled"])])),_:1},8,["small"])}a(541);var y=a(6112),g=(0,t.aZ)({props:{modelValue:String,small:{type:Boolean,required:!1},disabled:{required:!1}},emits:["update:modelValue","blur"],components:{FormField:p.Z,SelectField:y.Z},computed:{statuses(){const e=this.$store.state.terminals.terminalsRef;if(!e)return[];const l=e.status_list.map((e=>({value:e.id.toString(),label:e.name||""})));return l.unshift({value:"",label:"Усі"}),l}},methods:{select(e){this.$emit("update:modelValue",e),this.$emit("blur",e)}}}),w=a(89);const E=(0,w.Z)(g,[["render",k]]);var Z=E,R=a(6235),F=a(4887),I=a(5375),W=a(5384),D=a(1225),S=a(2375);const q=e=>({terminal_id:e.ID||"",status:e.status_code||"",name:e.name||"",address:e.address||"",can_offline:e.can_offline||!1,max_offline_sum:e.max_offline_sum||"",can_user_reversal:e.can_user_reversal||!1,callback_url:e.callback_url||"",callback_type:e.callback_type||"",callback_headers:e.callback_headers||"",callback_req_tmpl:e.callback_req_tmpl||"",sign_stract:e.sign_stract||"",callback_req_type:e.callback_req_type||"",inShifts:e.inShifts||!1,timeout:e.timeout||"",resendPeriod:e.resendPeriod||"",shift_start:e.shift_start||"00:00",shift_end:e.shift_end||"00:00",allocation_type:e.allocation_type||"",dop_info:e.dop_info||"",ptks_num:e.ptks_num||"",amount_list:e.amount_list||"",company_id:e.company_id||""});var x=(0,t.aZ)({inject:["rules"],props:{actionsFixed:{type:Boolean,required:!1,default:!1},terminal:{type:Object}},components:{FormField:p.Z,InputField:_.Z,CheckboxField:f.Z,TextareaField:h.Z,RequestTypeSelect:F.Z,PayloadField:V.Z,RequestMethodSelect:I.Z,VButton:b.Z,VForm:c.Z,TimepickerField:v.Z,StatusSelect:Z,SignStractField:D.Z,AllocTypeField:R.Z,CompaniesSelect:U.Z},setup(){const e=(0,s.pm)();return{toast:e,editTerminalSchema:S.zo}},data(){return{values:q(this.terminal)}},watch:{terminal(e){console.log(e),this.values=q(e)}},computed:{loading(){return this.$store.state.terminals.formLoading}},methods:{editConfig(e){this.$store.dispatch(W.T.EDIT_TERMINAL,{terminal:e,toast:this.toast})}}});const T=(0,w.Z)(x,[["render",m]]);var L=T,$=a(7863),Q=a(5498),C=(0,t.aZ)({inject:["rules"],components:{AppLayout:r.Z,AppLoading:$.Z,TerminalForm:L},data(){return{canEdit:!1,terminal:void 0}},computed:{loading(){return this.$store.state.terminals.loading},configData(){return this.$store.state.terminals.terminalConfig}},mounted(){this.canEdit=Boolean(null!==this.rules),this.$store.dispatch(W.T.GET_TERMINALS_REF),this.$store.dispatch(W.T.GET_TERMINAL_CONFIG),this.terminal=JSON.parse(window.localStorage.getItem(Q.Om)||"{}")},beforeUnmount(){window.localStorage.removeItem(Q.Om)}});const j=(0,w.Z)(C,[["render",o]]);var M=j}}]);
//# sourceMappingURL=737.7e9daab5.js.map