"use strict";(self["webpackChunkjust_sell"]=self["webpackChunkjust_sell"]||[]).push([[772],{2729:function(e,t,l){l.d(t,{Z:function(){return h}});var a=l(3396),i=l(7139),n=l(9167);const o=["checked","name","disabled"],d={key:0,for:"#checkbox-field",class:"checkbox-field__label"},s={id:"checkbox-field",class:"checkbox-field__box"},r={key:0,src:n,alt:"Checked"},u={key:0,class:"form-field__error"},c=(0,a.aZ)({emits:["change","update:modelValue"],data(){return{checked:this.$props.modelValue}},computed:{hasError(){return Boolean(this.$props.error)}},watch:{modelValue:{handler(e){this.checked="string"===typeof e?JSON.parse(e):e},immediate:!0}},methods:{check(){this.checked=!this.checked,this.$emit("change",this.checked),this.$emit("update:modelValue",this.checked)}}});var m=(0,a.aZ)({...c,__name:"CheckboxField",props:{name:null,label:null,defaultChecked:{type:Boolean},direction:{default:"right"},variant:{default:"primary"},size:{default:"md"},modelValue:{type:Boolean},disabled:null,error:null,justify:{default:"space-between"}},setup(e){return(t,l)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("input",{type:"checkbox",class:"checkbox-field__input",checked:e.modelValue||t.checked,name:e.name,disabled:e.disabled},null,8,o),(0,a._)("div",{class:(0,i.C_)(["checkbox-field",{"checkbox-field--checked":t.checked,"checkbox-field--disabled":e.disabled,[`checkbox-field--${e.direction}`]:!0,[`checkbox-field--${e.variant}`]:!0,[`checkbox-field--${e.size}`]:!0}]),style:(0,i.j5)({justifyContent:"space-between"===e.justify?"space-between":"flex-start"}),onClick:l[0]||(l[0]=(...e)=>t.check&&t.check(...e))},[Boolean(e.label)?((0,a.wg)(),(0,a.iD)("label",d,(0,i.zw)(e.label),1)):(0,a.kq)("",!0),(0,a._)("div",s,[t.checked?((0,a.wg)(),(0,a.iD)("img",r)):(0,a.kq)("",!0)])],6),t.hasError?((0,a.wg)(),(0,a.iD)("div",u,(0,i.zw)(e.error),1)):(0,a.kq)("",!0)],64))}});const p=m;var h=p},4201:function(e,t,l){l.d(t,{Z:function(){return v}});var a=l(3396),i=l(7139);const n=["placeholder","name","required","value"];function o(e,t,l,o,d,s){const r=(0,a.Q2)("imask");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{ref:"datepickerInput",type:"text",placeholder:e.placeholder,name:e.name,required:e.required,class:(0,i.C_)([`\n    form-field__input--${e.size} form-field__input--${e.variant}`,"form-field__input"]),value:e.value,autocomplete:"false",onInput:t[0]||(t[0]=t=>e.input(t)),onBlur:t[1]||(t[1]=t=>e.$emit("blur"))},null,42,n)),[[r,e.mask]])}var d=l(8296),s=l(9086),r={uk:{days:["Неділя","Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота"],daysShort:["Нед","Пнд","Втр","Срд","Чтв","Птн","Суб"],daysMin:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],monthsShort:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"],today:"Сьогодні",clear:"Очистити",format:"dd.mm.yyyy",weekStart:1}},u=l(2469);Object.assign(d.a.locales,r);const c={language:"uk",format:"yyyy-mm-dd",autohide:!0},m={mask:Date,pattern:"Y-`m-dd",autofix:!0,overwrite:!0};var p=(0,a.aZ)({emits:["update:modelValue","blur"],props:{name:{type:String},placeholder:{type:String,required:!1},required:{type:Boolean,required:!1},size:{type:String,required:!1,default:"md"},variant:{type:String,required:!1,default:"default"},modelValue:{type:String,required:!1},disabled:{type:Boolean,required:!1}},data(){return{value:this.modelValue||(0,u.W)(new Date),mask:m}},setup(){return{}},mounted(){this.initDatepicker()},watch:{modelValue:{handler(e){console.log("value",e),this.value=e},immediate:!0}},methods:{input(e){const t=e.target?.value;this.$emit("update:modelValue",t)},initDatepicker(){const e=this.$refs.datepickerInput;new d.a(e,{...c,defaultViewDate:this.value||new Date}),e.addEventListener("changeDate",this.onDateChange),e.addEventListener("hide",this.onDatepickerHide)},onDateChange(e){const t=e.detail,l=(0,u.W)(t.date);this.$emit("update:modelValue",l)},onDatepickerHide(){const e=this.$refs.datepickerInput;e.blur()}},directives:{imask:s.An}}),h=l(89);const f=(0,h.Z)(p,[["render",o]]);var v=f},2619:function(e,t,l){l.d(t,{Z:function(){return r}});var a=l(3396),i=l(7139);const n=["type","placeholder","name","required","value","disabled"],o=(0,a.aZ)({emits:["update:modelValue","blur"],methods:{input(e){const t=e.target?.value;this.$emit("update:modelValue",t)}}});var d=(0,a.aZ)({...o,__name:"InputField",props:{name:null,type:null,placeholder:null,required:{type:Boolean},size:{default:"lg"},variant:{default:"default"},modelValue:null,disabled:null},setup(e){return(t,l)=>((0,a.wg)(),(0,a.iD)("input",{type:e.type,placeholder:e.placeholder,name:e.name,required:e.required,class:(0,i.C_)([`form-field__input--${e.size} form-field__input--${e.variant}`,"form-field__input"]),value:e.modelValue,disabled:e.disabled,onInput:l[0]||(l[0]=e=>t.input(e)),onBlur:l[1]||(l[1]=e=>t.$emit("blur"))},null,42,n))}});const s=d;var r=s},8607:function(e,t,l){l.d(t,{Z:function(){return g}});var a=l(3396),i=l(7139),n=l(9242),o=l(5572),d=l(3886),s=l(2729);const r={class:"select-field__item-value"},u={class:"select-field__item-content"},c={class:"select-field__item-hint"},m=(0,a.aZ)({emits:["select"],components:{CheckboxField:s.Z},data(){return{selected:this.checked}},watch:{checked:{handler(e){this.selected=e},immediate:!0}}});var p=(0,a.aZ)({...m,__name:"OptionItemWithCheckbox",props:{option:null,checked:{type:Boolean}},setup(e){return(t,l)=>((0,a.wg)(),(0,a.iD)("div",{class:"select-field__item",onClick:l[1]||(l[1]=l=>t.$emit("select",e.option))},[(0,a._)("div",r,[(0,a.Wm)(s.Z,{name:"",modelValue:t.selected,"onUpdate:modelValue":l[0]||(l[0]=e=>t.selected=e),label:e.option.label,direction:"left",size:"sm"},null,8,["modelValue","label"]),(0,a._)("div",u,[(0,a._)("span",c,(0,i.zw)(e.option.hint),1)])])]))}});const h=p;var f=h;const v=["name"],_={class:"select-field__dropdown"},b=(0,a.aZ)({emits:["update:modelValue"],components:{SearchInput:o.Z,SelectedInput:d.Z,OptionItem:f},data(){return{opened:!1,value:this.modelValue||"",selectedLabel:"",selected:[]}},mounted(){document.addEventListener("keydown",this.onEscapePressed)},beforeUnmount(){document.removeEventListener("keydown",this.onEscapePressed)},watch:{selected(){this.value=this.selected?.label||""},options(){this.selectedLabel=this.setSelectedLabel(this.modelValue)},modelValue:{handler(e){this.selectedLabel=this.setSelectedLabel(e)},immediate:!0}},methods:{open(){this.opened=!0},toggle(){this.opened=!this.opened},close(){this.opened=!1},select(e){this.selected.includes(e.value)?this.selected=this.selected.filter((t=>t!==e.value)):this.selected=[...this.selected,e.value],this.selectedLabel=this.setSelectedLabel(this.selected),this.$emit("update:modelValue",this.selected)},clear(){this.value=""},onEscapePressed(e){"Escape"===e.key&&this.close()},setSelectedLabel(e=[]){const t=this.options.filter((({value:t})=>e.includes(t))).map((e=>e.label));return t.join(",")}}});var k=(0,a.aZ)({...b,__name:"SelectFieldMultiple",props:{name:null,options:null,inputPlaceholder:null,searchPlaceholder:null,hasSearch:{type:Boolean,default:!0},modelValue:null,disabled:null,size:{default:"md"}},setup(e){return(t,l)=>{const s=(0,a.Q2)("click-outside");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:(0,i.C_)(["select-field",{"select-field--active":t.opened,"select-field--disabled":e.disabled}]),ref:"selectField"},[(0,a._)("input",{type:"text",name:e.name,class:"select-input-hidden"},null,8,v),(0,a._)("div",{class:(0,i.C_)(["select-field__container form-field__input",`form-field__input--${e.size}`]),onClick:l[0]||(l[0]=l=>e.hasSearch?t.open():t.toggle())},[(0,a.wy)((0,a.Wm)(d.Z,{label:t.selectedLabel,placeholder:e.inputPlaceholder},null,8,["label","placeholder"]),[[n.F8,!e.hasSearch||!t.opened]]),(0,a.wy)((0,a.Wm)(o.Z,{placeholder:e.searchPlaceholder,onClear:t.clear,name:e.name},null,8,["placeholder","onClear","name"]),[[n.F8,t.opened&&e.hasSearch]])],2),(0,a._)("div",_,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.options,(e=>((0,a.wg)(),(0,a.j4)(f,{key:e.value,option:e,checked:t.selected?.includes(e.value),onSelect:t.select},null,8,["option","checked","onSelect"])))),128))])],2)),[[s,t.close]])}}});const V=k;var g=V},2195:function(e,t,l){l.d(t,{Z:function(){return x}});var a=l(3396),i=l(9242),n=l(7139),o=l.p+"img/chevron-top.161f73c2.svg",d=l.p+"img/chevron-bottom.4aa9eec8.svg";const s={class:"timepicker",ref:"timepicker"},r=(0,a._)("h4",{class:"timepicker-dropdown__title"},"Оберіть час",-1),u={class:"timepicker-dropdown__row"},c={class:"timepicker-dropdown__values"},m=(0,a._)("img",{src:o,alt:"Top",class:"timepicker-dropdown__icon"},null,-1),p=[m],h={class:"timepicker-dropdown__value"},f=(0,a._)("img",{src:d,alt:"Bottom",class:"timepicker-dropdown__icon"},null,-1),v=[f],_=(0,a._)("div",{class:"timepicker-dropdown__delimetr"},":",-1),b={class:"timepicker-dropdown__values"},k={class:"timepicker-dropdown__value"};function V(e,t,l,m,f,V){const g=(0,a.up)("form-field"),w=(0,a.Q2)("click-outside");return(0,a.wg)(),(0,a.j4)(g,{label:e.label},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("div",{class:"timepicker-field",onClick:t[1]||(t[1]=(...t)=>e.toggle&&e.toggle(...t))},[(0,a.wy)((0,a._)("input",{type:"text",name:"time",class:"timepicker-field__input","onUpdate:modelValue":t[0]||(t[0]=t=>e.time=t),readonly:""},null,512),[[i.nr,e.time]])]),(0,a._)("div",{class:(0,n.C_)(["timepicker-dropdown",{opened:e.opened}])},[r,(0,a._)("div",u,[(0,a._)("div",c,[(0,a._)("div",{class:"timepicker-dropdown__icon",onClick:t[2]||(t[2]=t=>e.increment("hour"))},p),(0,a._)("div",h,(0,n.zw)(e.formattedHour),1),(0,a._)("div",{class:"timepicker-dropdown__icon",onClick:t[3]||(t[3]=t=>e.decrement("hour"))},v)]),_,(0,a._)("div",b,[(0,a._)("img",{src:o,alt:"Top",class:"timepicker-dropdown__icon",onClick:t[4]||(t[4]=t=>e.increment("minuts"))}),(0,a._)("div",k,(0,n.zw)(e.formattedMinuts),1),(0,a._)("img",{src:d,alt:"Bottom",class:"timepicker-dropdown__icon",onClick:t[5]||(t[5]=t=>e.decrement("minuts"))})])])],2)])),[[w,e.close]])])),_:1},8,["label"])}var g=l(4560);const w=23,y=58,Z=e=>e<9?`0${e+1}`:`${e+1}`;var S=(0,a.aZ)({emits:["update:modelValue"],props:["modelValue","label"],components:{FormField:g.Z},data(){return{opened:!1,hour:0,minuts:0,time:"00:00"}},computed:{formattedHour(){return Z(this.hour)},formattedMinuts(){return Z(this.minuts)}},watch:{hour(){this.time=this.formattedHour+":"+this.formattedMinuts,this.$emit("update:modelValue",this.time)},minuts(){this.time=this.formattedHour+":"+this.formattedMinuts,this.$emit("update:modelValue",this.time)}},methods:{increment(e){const t=this[e],l="hour"===e&&t<w,a="minuts"===e&&t<y;(l||a)&&(this[e]=t+1)},decrement(e){const t=this[e];t>0&&(this[e]=t-1)},toggle(){this.opened=!this.opened},close(){this.opened=!1}}}),C=l(89);const $=(0,C.Z)(S,[["render",V]]);var x=$},328:function(e,t,l){l.d(t,{Z:function(){return c}});var a=l(3396);const i={class:"timepicker-range-field"},n=(0,a._)("div",{class:"timepicker-range__delimetr"},"-",-1);function o(e,t,l,o,d,s){const r=(0,a.up)("timepicker-field");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(r,{label:l.labelFrom},null,8,["label"]),n,(0,a.Wm)(r,{label:l.labelTo},null,8,["label"])])}var d=l(2195),s={props:["labelFrom","labelTo"],components:{TimepickerField:d.Z}},r=l(89);const u=(0,r.Z)(s,[["render",o]]);var c=u},7364:function(e,t,l){l.d(t,{Z:function(){return u}});var a=l(3396);function i(e,t,l,i,n,o){const d=(0,a.up)("select-field"),s=(0,a.up)("form-field");return(0,a.wg)(),(0,a.j4)(s,{label:e.label||"Термінали на які не поширюється знижка",error:e.error},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{options:e.terminals,name:"terminal","input-placeholder":"Оберіть термінал","search-placeholder":"Введіть назву терміналу","has-searh":"","model-value":e.modelValue,"onUpdate:modelValue":e.select},null,8,["options","model-value","onUpdate:modelValue"])])),_:1},8,["label","error"])}var n=l(4560),o=l(8607),d=(0,a.aZ)({props:{modelValue:String,error:String,label:{type:String,required:!1}},emits:["update:modelValue"],components:{FormField:n.Z,SelectField:o.Z},computed:{terminals(){return[{value:"1",label:"Terminal 1"},{value:"2",label:"Terminal 2"}]}},methods:{select(e){this.$emit("update:modelValue",e)}}}),s=l(89);const r=(0,s.Z)(d,[["render",i]]);var u=r},4603:function(e,t,l){l.r(t),l.d(t,{default:function(){return I}});var a=l(3396);function i(e,t,l,i,n,o){const d=(0,a.up)("app-loading"),s=(0,a.up)("transport-form"),r=(0,a.up)("app-layout");return(0,a.wg)(),(0,a.j4)(r,null,{appTitle:(0,a.w5)((()=>[(0,a.Uk)("Додати ТС")])),appLoading:(0,a.w5)((()=>[(0,a.Wm)(d,{loading:!1})])),appContent:(0,a.w5)((()=>[(0,a.Wm)(s,{onSubmit:e.createTransport},null,8,["onSubmit"])])),_:1})}var n=l(5627),o=l(7863);const d={class:"terminal-form__container"},s={class:"schedule-container"},r={class:"form-actions form-actions--fixed"};function u(e,t,l,i,n,o){const u=(0,a.up)("route-select-field"),c=(0,a.up)("input-field"),m=(0,a.up)("form-field"),p=(0,a.up)("schedule-field"),h=(0,a.up)("timepicker-range"),f=(0,a.up)("terminals-select"),v=(0,a.up)("transport-notify-select"),_=(0,a.up)("datepicker-field"),b=(0,a.up)("v-button"),k=(0,a.up)("v-form");return(0,a.wg)(),(0,a.iD)("div",d,[(0,a.Wm)(k,{action:"#",class:"terminal-form","initial-values":e.initialValues,onSubmit:e.onSubmit},{fields:(0,a.w5)((({values:t})=>[(0,a.Wm)(u,{modelValue:t.route,"onUpdate:modelValue":e=>t.route=e},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(m,{label:"Назва ТС"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,name:"name",type:"text",placeholder:"Введіть назву ТС"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,a.Wm)(m,{label:"Державний номер ТС"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:t.transport_num,"onUpdate:modelValue":e=>t.transport_num=e,name:"name",type:"text",placeholder:"Введіть державний номер ТС"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,a.Wm)(m,{label:"Час перебування на маршруті"},{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a.Wm)(p,{modelValue:t.drive_time,"onUpdate:modelValue":e=>t.drive_time=e},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(h,{modelValue:t.drive_time,"onUpdate:modelValue":e=>t.drive_time=e},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024),(0,a.Wm)(f,{label:"Валідатор",modelValue:t.terminal_num,"onUpdate:modelValue":e=>t.terminal_num=e},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(v,{modelValue:t.notify,"onUpdate:modelValue":e=>t.notify=e},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(m,{label:"Наступний ТО"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:t.next_to_date,"onUpdate:modelValue":e=>t.next_to_date=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,a._)("div",r,[(0,a.Wm)(b,{type:"submit",loading:e.loading},{text:(0,a.w5)((()=>[(0,a.Uk)("Додати ТС")])),_:1},8,["loading"])])])),_:1},8,["initial-values","onSubmit"])])}var c=l(4677),m=l(4560),p=l(2619),h=l(4610),f=l(4856);const v={class:"schedule-field"};function _(e,t,l,i,n,o){const d=(0,a.up)("checkbox-field");return(0,a.wg)(),(0,a.iD)("div",v,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.days,(t=>((0,a.wg)(),(0,a.j4)(d,{key:t.value,label:t.label,name:e.name,direction:"left",modelValue:e.selected[t.value],"onUpdate:modelValue":l=>e.selected[t.value]=l,onChange:l=>e.onChange(t.value,l)},null,8,["label","name","modelValue","onUpdate:modelValue","onChange"])))),128))])}var b=l(2729),k=(0,a.aZ)({emits:["update:modelValue"],props:["name","modelValue"],components:{CheckboxField:b.Z},setup(){const e="all",t=[{label:"Пн",value:"Пн"},{label:"Вт",value:"Вт"},{label:"Ср",value:"Ср"},{label:"Чт",value:"Чт"},{label:"Пт",value:"Пт"},{label:"Сб",value:"Сб"},{label:"Нд",value:"Нд"},{label:"Усі дні",value:e}];return{days:t,ALL_DAYS:e}},data(){return{selected:this.modelValue||{}}},watch:{selected(e){this.$emit("update:modelValue",e)}},methods:{onChange(e,t){e!==this.ALL_DAYS?(this.selected[this.ALL_DAYS]=!1,this.selected[e]=t):this.selected=this.days.reduce(((e,l)=>(e[l.value]=t,e)),{})}}}),V=l(89);const g=(0,V.Z)(k,[["render",_]]);var w=g,y=l(328),Z=l(7364);function S(e,t,l,i,n,o){const d=(0,a.up)("select-field-multiple"),s=(0,a.up)("form-field");return(0,a.wg)(),(0,a.j4)(s,{label:"Повідомляти про",error:e.error},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{options:e.notifications,name:"syncTypes","input-placeholder":"Оберіть зі списку","search-placeholder":"Введіть назву маршрута","has-search":!1,"model-value":e.value,"onUpdate:modelValue":e.select},null,8,["options","model-value","onUpdate:modelValue"])])),_:1},8,["error"])}var C=l(8607),$=(0,a.aZ)({props:{modelValue:String,error:String},emits:["update:modelValue"],components:{FormField:m.Z,SelectFieldMultiple:C.Z},data(){return{value:""}},computed:{notifications(){const e=[{label:"Відхилення від маршруту",value:"1"},{label:"Перевищення швидкості",value:"2"},{label:"Тривала зупинка",value:"3"}];return e}},watch:{modelValue:{handler(e){if(Number.isNaN(parseInt(e)))return this.value=this.notifications.find((t=>t.label===e))?.value||"",void this.$emit("update:modelValue",this.value);this.value=e},immediate:!0}},methods:{select(e){this.$emit("update:modelValue",e)}}});const x=(0,V.Z)($,[["render",S]]);var D=x,U=l(4201),F=l(2028);const W={id:"",route:"",name:"",terminal_num:"",transport_num:"",drive_time:"",notify:[],next_to_date:""};var L=(0,a.aZ)({props:["defaultValues"],emits:["submit"],components:{FormField:m.Z,InputField:p.Z,VButton:h.Z,VForm:f.Z,RouteSelectField:F.pV,ScheduleField:w,TimepickerRange:y.Z,TerminalsSelect:Z.Z,TransportNotifySelect:D,DatepickerField:U.Z},setup(){const e=(0,c.pm)();return{toast:e}},data(){return{initialValues:this.defaultValues||W}},watch:{defaultValues(e){this.initialValues={...this.initialValues,...e}}},computed:{loading(){return!1}},methods:{onSubmit(e){this.$emit("submit",e)}}});const T=(0,V.Z)(L,[["render",u]]);var q=T,j=l(5837),E=l(7941),z=(0,a.aZ)({inject:["rules"],components:{AppLayout:n.Z,AppLoading:o.Z,TransportForm:q},data(){return{canEdit:!1}},computed:{loading(){return this.$store.state.transport.loading}},async mounted(){this.$store.dispatch(j.V.GET_ROUTES)},setup(){const e=(0,c.pm)();return{toast:e}},methods:{createTransport(e){this.$store.dispatch(E.K.CREATE_TRANSPORT,{payload:e,toast:this.toast})}}});const B=(0,V.Z)(z,[["render",i]]);var I=B},9167:function(e,t,l){e.exports=l.p+"img/check-icon.972bc3c4.svg"}}]);
//# sourceMappingURL=772.e38cb7f8.js.map