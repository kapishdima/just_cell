"use strict";(self["webpackChunkjust_sell"]=self["webpackChunkjust_sell"]||[]).push([[508],{2729:function(e,l,t){t.d(l,{Z:function(){return h}});var a=t(3396),n=t(7139),i=t(9167);const o=["checked","name","disabled"],s={key:0,for:"#checkbox-field",class:"checkbox-field__label"},d={id:"checkbox-field",class:"checkbox-field__box"},c={key:0,src:i,alt:"Checked"},r={key:0,class:"form-field__error"},u=(0,a.aZ)({emits:["change","update:modelValue"],data(){return{checked:this.$props.modelValue}},computed:{hasError(){return Boolean(this.$props.error)}},watch:{modelValue:{handler(e){this.checked="string"===typeof e?JSON.parse(e):e},immediate:!0}},methods:{check(){this.checked=!this.checked,this.$emit("change",this.checked),this.$emit("update:modelValue",this.checked)}}});var p=(0,a.aZ)({...u,__name:"CheckboxField",props:{name:null,label:null,defaultChecked:{type:Boolean},direction:{default:"right"},variant:{default:"primary"},size:{default:"md"},modelValue:{type:Boolean},disabled:null,error:null,justify:{default:"space-between"}},setup(e){return(l,t)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("input",{type:"checkbox",class:"checkbox-field__input",checked:e.modelValue||l.checked,name:e.name,disabled:e.disabled},null,8,o),(0,a._)("div",{class:(0,n.C_)(["checkbox-field",{"checkbox-field--checked":l.checked,"checkbox-field--disabled":e.disabled,[`checkbox-field--${e.direction}`]:!0,[`checkbox-field--${e.variant}`]:!0,[`checkbox-field--${e.size}`]:!0}]),style:(0,n.j5)({justifyContent:"space-between"===e.justify?"space-between":"flex-start"}),onClick:t[0]||(t[0]=(...e)=>l.check&&l.check(...e))},[Boolean(e.label)?((0,a.wg)(),(0,a.iD)("label",s,(0,n.zw)(e.label),1)):(0,a.kq)("",!0),(0,a._)("div",d,[l.checked?((0,a.wg)(),(0,a.iD)("img",c)):(0,a.kq)("",!0)])],6),l.hasError?((0,a.wg)(),(0,a.iD)("div",r,(0,n.zw)(e.error),1)):(0,a.kq)("",!0)],64))}});const m=p;var h=m},6806:function(e,l,t){t.d(l,{Z:function(){return r}});var a=t(3396);function n(e,l,t,n,i,o){const s=(0,a.up)("select-field"),d=(0,a.up)("form-field");return(0,a.wg)(),(0,a.j4)(d,{label:"Компанії"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{options:e.companies,name:"companies","input-placeholder":"Оберіть компанію","search-placeholder":"Введіть компанію","has-search":!1,"model-value":e.modelValue,"onUpdate:modelValue":e.select,size:"sm",disabled:e.disabled},null,8,["options","model-value","onUpdate:modelValue","disabled"])])),_:1})}t(541);var i=t(4560),o=t(6112),s=(0,a.aZ)({props:{modelValue:String,small:{type:Boolean,required:!1},disabled:{required:!1}},emits:["update:modelValue","blur"],components:{FormField:i.Z,SelectField:o.Z},computed:{companies(){const e=this.$store.state.terminals.terminalsRef;if(!e)return[];const l=e.parent_child.map((e=>({value:e.id.toString(),label:e.name||""})));return l.unshift({value:"",label:"Не обрано"}),l}},methods:{select(e){this.$emit("update:modelValue",e),this.$emit("blur",e)}}}),d=t(89);const c=(0,d.Z)(s,[["render",n]]);var r=c},2619:function(e,l,t){t.d(l,{Z:function(){return c}});var a=t(3396),n=t(7139);const i=["type","placeholder","name","required","value","disabled"],o=(0,a.aZ)({emits:["update:modelValue","blur"],methods:{input(e){const l=e.target?.value;this.$emit("update:modelValue",l)}}});var s=(0,a.aZ)({...o,__name:"InputField",props:{name:null,type:null,placeholder:null,required:{type:Boolean},size:{default:"lg"},variant:{default:"default"},modelValue:null,disabled:null},setup(e){return(l,t)=>((0,a.wg)(),(0,a.iD)("input",{type:e.type,placeholder:e.placeholder,name:e.name,required:e.required,class:(0,n.C_)([`form-field__input--${e.size} form-field__input--${e.variant}`,"form-field__input"]),value:e.modelValue,disabled:e.disabled,onInput:t[0]||(t[0]=e=>l.input(e)),onBlur:t[1]||(t[1]=e=>l.$emit("blur"))},null,42,i))}});const d=s;var c=d},8607:function(e,l,t){t.d(l,{Z:function(){return g}});var a=t(3396),n=t(7139),i=t(9242),o=t(5572),s=t(3886),d=t(2729);const c={class:"select-field__item-value"},r={class:"select-field__item-content"},u={class:"select-field__item-hint"},p=(0,a.aZ)({emits:["select"],components:{CheckboxField:d.Z},data(){return{selected:this.checked}},watch:{checked:{handler(e){this.selected=e},immediate:!0}}});var m=(0,a.aZ)({...p,__name:"OptionItemWithCheckbox",props:{option:null,checked:{type:Boolean}},setup(e){return(l,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"select-field__item",onClick:t[1]||(t[1]=t=>l.$emit("select",e.option))},[(0,a._)("div",c,[(0,a.Wm)(d.Z,{name:"",modelValue:l.selected,"onUpdate:modelValue":t[0]||(t[0]=e=>l.selected=e),label:e.option.label,direction:"left",size:"sm"},null,8,["modelValue","label"]),(0,a._)("div",r,[(0,a._)("span",u,(0,n.zw)(e.option.hint),1)])])]))}});const h=m;var f=h;const b=["name"],v={class:"select-field__dropdown"},_=(0,a.aZ)({emits:["update:modelValue"],components:{SearchInput:o.Z,SelectedInput:s.Z,OptionItem:f},data(){return{opened:!1,value:this.modelValue||"",selectedLabel:"",selected:[]}},mounted(){document.addEventListener("keydown",this.onEscapePressed)},beforeUnmount(){document.removeEventListener("keydown",this.onEscapePressed)},watch:{selected(){this.value=this.selected?.label||""},options(){this.selectedLabel=this.setSelectedLabel(this.modelValue)},modelValue:{handler(e){this.selectedLabel=this.setSelectedLabel(e)},immediate:!0}},methods:{open(){this.opened=!0},toggle(){this.opened=!this.opened},close(){this.opened=!1},select(e){this.selected.includes(e.value)?this.selected=this.selected.filter((l=>l!==e.value)):this.selected=[...this.selected,e.value],this.selectedLabel=this.setSelectedLabel(this.selected),this.$emit("update:modelValue",this.selected)},clear(){this.value=""},onEscapePressed(e){"Escape"===e.key&&this.close()},setSelectedLabel(e=[]){const l=this.options.filter((({value:l})=>e.includes(l))).map((e=>e.label));return l.join(",")}}});var k=(0,a.aZ)({..._,__name:"SelectFieldMultiple",props:{name:null,options:null,inputPlaceholder:null,searchPlaceholder:null,hasSearch:{type:Boolean,default:!0},modelValue:null,disabled:null,size:{default:"md"}},setup(e){return(l,t)=>{const d=(0,a.Q2)("click-outside");return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:(0,n.C_)(["select-field",{"select-field--active":l.opened,"select-field--disabled":e.disabled}]),ref:"selectField"},[(0,a._)("input",{type:"text",name:e.name,class:"select-input-hidden"},null,8,b),(0,a._)("div",{class:(0,n.C_)(["select-field__container form-field__input",`form-field__input--${e.size}`]),onClick:t[0]||(t[0]=t=>e.hasSearch?l.open():l.toggle())},[(0,a.wy)((0,a.Wm)(s.Z,{label:l.selectedLabel,placeholder:e.inputPlaceholder},null,8,["label","placeholder"]),[[i.F8,!e.hasSearch||!l.opened]]),(0,a.wy)((0,a.Wm)(o.Z,{placeholder:e.searchPlaceholder,onClear:l.clear,name:e.name},null,8,["placeholder","onClear","name"]),[[i.F8,l.opened&&e.hasSearch]])],2),(0,a._)("div",v,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.options,(e=>((0,a.wg)(),(0,a.j4)(f,{key:e.value,option:e,checked:l.selected?.includes(e.value),onSelect:l.select},null,8,["option","checked","onSelect"])))),128))])],2)),[[d,l.close]])}}});const w=k;var g=w},2446:function(e,l,t){t.d(l,{Z:function(){return r}});var a=t(3396),n=t(7139);const i={class:"form-title__content"};function o(e,l,t,o,s,d){return(0,a.wg)(),(0,a.iD)("div",{class:(0,n.C_)(["form-title",`form-title--${e.direction}`])},[(0,a._)("div",i,[(0,a.WI)(e.$slots,"title")])],2)}var s=(0,a.aZ)({props:{direction:{type:String,required:!1,default:"bottom"}}}),d=t(89);const c=(0,d.Z)(s,[["render",o]]);var r=c},1166:function(e,l,t){t.d(l,{Z:function(){return u}});var a=t(3396),n=t(9242);const i={class:"tab-pane"};function o(e,l,t,o,s,d){return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",i,[(0,a.WI)(e.$slots,"default")],512)),[[n.F8,o.isActive]])}var s=t(4870),d={props:["title"],setup(e){const l=(0,s.iH)(!1),t=(0,a.f3)("TabsProvider");return(0,a.YP)((()=>t.selectedIndex),(()=>{l.value=e.title===t.selectedIndex})),(0,a.wF)((()=>{l.value=e.title===t.selectedIndex})),{isActive:l}}},c=t(89);const r=(0,c.Z)(d,[["render",o]]);var u=r},2960:function(e,l,t){t.d(l,{Z:function(){return h}});var a=t(3396),n=t(7139);const i={class:"tabs"},o={class:"tabs-pills"},s=["onClick"],d={class:"tabs-panes"};function c(e,l,t,c,r,u){return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",o,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.tabs,(l=>((0,a.wg)(),(0,a.iD)("div",{class:(0,n.C_)(["tab-pill",{active:e.selectedIndex===l.props.title}]),key:l.props.title,onClick:t=>e.selectedIndex=l.props.title},(0,n.zw)(l.props.title),11,s)))),128))]),(0,a._)("div",d,[(0,a.WI)(e.$slots,"default")])])}var r=t(4870),u=(0,a.aZ)({setup(e,{slots:l}){const t=(0,r.qj)({selectedIndex:null,tabs:[],count:0});(0,a.JJ)("TabsProvider",t);const n=e=>{t.selectedIndex=e},i=()=>{l.default&&(t.tabs=l.default())};return(0,a.wF)((()=>i())),(0,a.Xn)((()=>i())),(0,a.bv)((()=>{n(t.tabs.at(0).props.title)})),{...(0,r.BK)(t),selectTab:n}}}),p=t(89);const m=(0,p.Z)(u,[["render",c]]);var h=m},7364:function(e,l,t){t.d(l,{Z:function(){return r}});var a=t(3396);function n(e,l,t,n,i,o){const s=(0,a.up)("select-field"),d=(0,a.up)("form-field");return(0,a.wg)(),(0,a.j4)(d,{label:e.label||"Термінали на які не поширюється знижка",error:e.error},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{options:e.terminals,name:"terminal","input-placeholder":"Оберіть термінал","search-placeholder":"Введіть назву терміналу","has-searh":"","model-value":e.modelValue,"onUpdate:modelValue":e.select},null,8,["options","model-value","onUpdate:modelValue"])])),_:1},8,["label","error"])}var i=t(4560),o=t(8607),s=(0,a.aZ)({props:{modelValue:String,error:String,label:{type:String,required:!1}},emits:["update:modelValue"],components:{FormField:i.Z,SelectField:o.Z},computed:{terminals(){return[{value:"1",label:"Terminal 1"},{value:"2",label:"Terminal 2"}]}},methods:{select(e){this.$emit("update:modelValue",e)}}}),d=t(89);const c=(0,d.Z)(s,[["render",n]]);var r=c},2442:function(e,l,t){t.r(l),t.d(l,{default:function(){return L}});var a=t(3396);function n(e,l,t,n,i,o){const s=(0,a.up)("app-loading"),d=(0,a.up)("loyalty-form"),c=(0,a.up)("app-layout");return(0,a.wg)(),(0,a.j4)(c,null,{appTitle:(0,a.w5)((()=>[(0,a.Uk)(" Редагувати систему лояльності ")])),appContent:(0,a.w5)((()=>[(0,a.Wm)(s,{loading:e.loading},null,8,["loading"]),e.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(d,{key:0}))])),_:1})}var i=t(5627),o=t(7139),s=t.p+"img/warn-icon.68b98705.svg";const d=(0,a._)("div",{class:"loyalty-form__description"},[(0,a._)("img",{src:s,alt:""}),(0,a._)("p",null,[(0,a.Uk)(" Даний тип знижки дає змогу додати до системи лояльності конкретні номери карт. Карти можна безпосередньо на будь якому терміналі системи JustSell. З інструкцією можете ознайомитись "),(0,a._)("a",{href:"#"},"тут")])],-1),c={class:"loyalty-form"},r={class:"loyalty-form"},u={class:"checkbox-container"};function p(e,l,t,n,i,s){const p=(0,a.up)("input-field"),m=(0,a.up)("form-field"),h=(0,a.up)("terminals-select"),f=(0,a.up)("companies-select"),b=(0,a.up)("v-tab"),v=(0,a.up)("checkbox-field"),_=(0,a.up)("form-title"),k=(0,a.up)("v-tabs"),w=(0,a.up)("v-button"),g=(0,a.up)("v-form");return(0,a.wg)(),(0,a.j4)(g,{"class-names":"loyalty-form","initial-values":e.initialValues,onSubmit:e.submitLoyalty},{fields:(0,a.w5)((({values:l})=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,{title:"Фіксована знижка"},{default:(0,a.w5)((()=>[d,(0,a._)("div",c,[(0,a.Wm)(m,{label:"Введіть назву знижки"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{name:"name",placeholder:"Назва знижки"})])),_:1}),(0,a.Wm)(m,{label:"Введіть сумму для активації бонуса"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{placeholder:"Наприклад, 300"})])),_:1}),(0,a.Wm)(h),(0,a.Wm)(f)])])),_:1}),(0,a.Wm)(b,{title:"Динамічний бонус"},{default:(0,a.w5)((()=>[(0,a._)("div",r,[(0,a._)("div",u,[(0,a.Wm)(m,null,{hint:(0,a.w5)((()=>[(0,a.Uk)(" Користувач накопичивши бонус на одному терміналі може використати його на будь якому іншому терміналі з вибраної групи ")])),default:(0,a.w5)((()=>[(0,a.Wm)(v,{modelValue:l.all_terms,"onUpdate:modelValue":e=>l.all_terms=e,name:"need_shift",label:"Єдиний бонус для всіх терміналів"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)]),l.all_terms?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(h,{key:0})),(0,a.Wm)(_,{direction:"top"},{title:(0,a.w5)((()=>[(0,a.Uk)("За кількістю покупок ")])),_:1}),(0,a.Wm)(m,{label:"Кожен продаж безкоштовний"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{placeholder:"Наприклад, кожна 5-а безкоштовний"})])),_:1}),(0,a.Wm)(_,{direction:"top"},{title:(0,a.w5)((()=>[(0,a.Uk)("Бонус при покупці")])),_:1}),(0,a.Wm)(m,{label:"Нараховується % від суми товару"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{placeholder:"Наприклад, 10%"})])),_:1}),(0,a.Wm)(m,{label:"Фіксований бонус"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{placeholder:"Наприклад, 400"})])),_:1})])])),_:2},1024)])),_:2},1024),(0,a._)("div",{class:(0,o.C_)(["form-actions",{"form-actions--fixed":e.actionsFixed}])},[e.canEdit?((0,a.wg)(),(0,a.j4)(w,{key:0,type:"button",loading:e.loading,onClick:e.sendConfig},{text:(0,a.w5)((()=>[(0,a.Uk)("Додати налаштування термінала")])),_:1},8,["loading","onClick"])):(0,a.kq)("",!0),(0,a.Wm)(w,{type:"button",loading:e.loading,onClick:e.activeTerminal,fixed:""},{text:(0,a.w5)((()=>[(0,a.Uk)("Додати знижку")])),_:1},8,["loading","onClick"])],2)])),_:1},8,["initial-values","onSubmit"])}var m=t(4856),h=t(1166),f=t(2960),b=t(4560),v=t(2619),_=t(2729),k=t(4610),w=t(2446),g=t(7364),y=t(6806),Z=t(4677);const V=e=>({id:e,all_terms:!1});var x=(0,a.aZ)({inject:["rules"],props:{actionsFixed:{type:Boolean,required:!1,default:!1}},components:{FormField:b.Z,FormTitle:w.Z,InputField:v.Z,VButton:k.Z,VForm:m.Z,VTab:h.Z,VTabs:f.Z,TerminalsSelect:g.Z,CompaniesSelect:y.Z,CheckboxField:_.Z},setup(){const e=(0,Z.pm)();return{toast:e}},data(){return{initialValues:V("")}},mounted(){},methods:{submitLoyalty(e){console.log(e)}}}),C=t(89);const W=(0,C.Z)(x,[["render",p]]);var S=W,F=t(7863),$=t(5384),I=(0,a.aZ)({components:{AppLayout:i.Z,AppLoading:F.Z,LoyaltyForm:S},computed:{loading(){return this.$store.state.terminals.loading}},mounted(){this.$store.dispatch($.T.GET_TERMINALS_REF)}});const j=(0,C.Z)(I,[["render",n]]);var L=j},9167:function(e,l,t){e.exports=t.p+"img/check-icon.972bc3c4.svg"}}]);
//# sourceMappingURL=508.ea884e34.js.map