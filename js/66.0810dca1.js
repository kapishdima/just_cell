"use strict";(self["webpackChunkjust_sell"]=self["webpackChunkjust_sell"]||[]).push([[66],{2375:function(e,a,l){l.d(a,{Cb:function(){return d},oh:function(){return r},zo:function(){return o}});var t=l(7736),n=l(7629);const o=(0,n.Ry)({terminal_id:(0,n.Z_)().required(t.r.REQUIRED_FIELD),can_offline:(0,n.O7)().required(t.r.REQUIRED_FIELD),can_user_reversal:(0,n.O7)().required(t.r.REQUIRED_FIELD),callback_req_type:(0,n.Z_)().required(t.r.REQUIRED_FIELD),callback_type:(0,n.Z_)().required(t.r.REQUIRED_FIELD),inShifts:(0,n.O7)().required(t.r.REQUIRED_FIELD)}),r=(0,n.Ry)({id:(0,n.Z_)().required(t.r.REQUIRED_FIELD),secret_key:(0,n.Z_)().required(t.r.REQUIRED_FIELD)}),d=(0,n.Ry)({secret_key:(0,n.Z_)().required(t.r.REQUIRED_FIELD),req_type:(0,n.Z_)().required(t.r.REQUIRED_FIELD),settings:(0,n.Z_)().required(t.r.REQUIRED_FIELD),sync_type:(0,n.Z_)().required(t.r.REQUIRED_FIELD),max_offline_sum:(0,n.Rx)().required(t.r.REQUIRED_FIELD).min(1,t.r.MIN_NUMBER),endpoint_result:(0,n.Z_)().required(t.r.REQUIRED_FIELD),payload:(0,n.Z_)().required(t.r.REQUIRED_FIELD),sign_stract:(0,n.Z_)().required(t.r.REQUIRED_FIELD),card_wait:(0,n.Rx)().required(t.r.REQUIRED_FIELD).min(1,t.r.MIN_NUMBER),sync_period:(0,n.Rx)().required(t.r.REQUIRED_FIELD).min(1,t.r.MIN_NUMBER)})},1255:function(e,a,l){l.d(a,{Z:function(){return R}});var t=l(3396);const n=["type","placeholder","name","required","value"],o={class:"form-field__extra-container"};function r(e,a,l,r,d,i){const u=(0,t.up)("password-visibility-button"),s=(0,t.up)("password-generate-button");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("input",{type:e.type,placeholder:e.placeholder,name:e.name,required:e.required,value:e.password,class:"form-field__input",onInput:a[0]||(a[0]=a=>e.input(a)),onBlur:a[1]||(a[1]=a=>e.$emit("blur"))},null,40,n),(0,t._)("div",o,[(0,t.Wm)(u,{onChange:e.changeType},null,8,["onChange"]),e.hasGenerateButton?((0,t.wg)(),(0,t.j4)(s,{key:0,onGeneratedPassword:e.onGeneratePassword},null,8,["onGeneratedPassword"])):(0,t.kq)("",!0)])],64)}var d=l.p+"img/eye_hidden.08669155.svg",i=l.p+"img/eye_visible.cfc84e83.svg";const u={key:0,src:d,alt:"Show\n    password"},s={key:1,src:i,alt:"Show\n    password"};function m(e,a,l,n,o,r){return(0,t.wg)(),(0,t.iD)("button",{type:"button",class:"form-field__extra password-visibility-button",tabindex:"-1",onClick:a[0]||(a[0]=(...a)=>e.changeVisibility&&e.changeVisibility(...a))},[e.visibility?((0,t.wg)(),(0,t.iD)("img",s)):((0,t.wg)(),(0,t.iD)("img",u))])}var c=(0,t.aZ)({emits:["change"],data(){return{visibility:!1}},watch:{visibility(e){const a=e?"text":"password";this.$emit("change",a)}},methods:{changeVisibility(){this.visibility=!this.visibility}}}),p=l(89);const _=(0,p.Z)(c,[["render",m]]);var f=_,h=l.p+"img/key_icon.9e7583e7.svg";const V=(0,t._)("img",{src:h,alt:"Generate"},null,-1),y=[V];function g(e,a,l,n,o,r){return(0,t.wg)(),(0,t.iD)("button",{type:"button",class:"form-field__extra password-visibility-button",tabindex:"-1",onClick:a[0]||(a[0]=(...a)=>e.generatePassword&&e.generatePassword(...a))},y)}var w=(0,t.aZ)({emits:["generatedPassword"],data(){return{generatedPassword:""}},watch:{generatedPassword(e){this.$emit("generatedPassword",e)}},methods:{generatePassword(){const e="0123456789abcdefghijklmnopqrstuvwxyz!@#$%^&*()ABCDEFGHIJKLMNOPQRSTUVWXYZ",a=15;let l="";for(var t=0;t<a;t++){const a=Math.floor(Math.random()*e.length);l+=e.substring(a,a+1)}this.generatedPassword=l}}});const b=(0,p.Z)(w,[["render",g]]);var v=b,E=(0,t.aZ)({props:{name:{type:String,required:!0},placeholder:{type:String,required:!1},required:{type:Boolean,required:!1},hasGenerateButton:{type:Boolean,default:!1},modelValue:String},emits:["update:modelValue","blur"],components:{PasswordVisibilityButton:f,PasswordGenerateButton:v},data(){return{type:"password",password:this.modelValue||""}},watch:{modelValue(e){this.password=e}},methods:{changeType(e){this.type=e},input(e){const a=e.target?.value;this.$emit("update:modelValue",a)},onGeneratePassword(e){this.$emit("update:modelValue",e)}}});const U=(0,p.Z)(E,[["render",r]]);var R=U},2446:function(e,a,l){l.d(a,{Z:function(){return s}});var t=l(3396),n=l(7139);const o={class:"form-title__content"};function r(e,a,l,r,d,i){return(0,t.wg)(),(0,t.iD)("div",{class:(0,n.C_)(["form-title",`form-title--${e.direction}`])},[(0,t._)("div",o,[(0,t.WI)(e.$slots,"title")])],2)}var d=(0,t.aZ)({props:{direction:{type:String,required:!1,default:"bottom"}}}),i=l(89);const u=(0,i.Z)(d,[["render",r]]);var s=u},2456:function(e,a,l){l.d(a,{Z:function(){return u}});var t=l(3396);function n(e,a,l,n,o,r){return(0,t.WI)(e.$slots,"content",{canRender:e.canRender})}var o=l(6601),r=(0,t.aZ)({props:{rule:{type:String,required:!0}},data(){return{canRender:!1}},mounted(){this.canRender=this.init()},methods:{init(){const e=(0,o.nO)();if(!e)return!1;const a=e.map((e=>e.tag));return a?.includes(this.rule)||!1}}}),d=l(89);const i=(0,d.Z)(r,[["render",n]]);var u=i},6235:function(e,a,l){l.d(a,{Z:function(){return s}});var t=l(3396);function n(e,a,l,n,o,r){const d=(0,t.up)("select-field"),i=(0,t.up)("form-field");return(0,t.wg)(),(0,t.j4)(i,{label:"Тип встановлення",error:e.error},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{options:e.allocTypes,name:"syncTypes","input-placeholder":"Оберіть тип встановлення","search-placeholder":"Введіть тип встановлення","has-search":!1,"model-value":e.value,"onUpdate:modelValue":e.select},null,8,["options","model-value","onUpdate:modelValue"])])),_:1},8,["error"])}l(7658);var o=l(4560),r=l(6112),d=(0,t.aZ)({props:{modelValue:String,error:String},emits:["update:modelValue"],components:{FormField:o.Z,SelectField:r.Z},data(){return{value:""}},computed:{allocTypes(){const e=this.$store.state.terminals.terminalsRef;if(!e)return[];const a=e.alloc_type.map((e=>({value:e.id.toString(),label:e.name||""})));return a.push({label:"Не вибрано",value:""}),a}},watch:{modelValue:{handler(e){if(Number.isNaN(parseInt(e)))return this.value=this.allocTypes.find((a=>a.label===e))?.value||"",void this.$emit("update:modelValue",this.value);this.value=e},immediate:!0}},methods:{select(e){this.$emit("update:modelValue",e)}}}),i=l(89);const u=(0,i.Z)(d,[["render",n]]);var s=u},5375:function(e,a,l){l.d(a,{Z:function(){return s}});var t=l(3396);function n(e,a,l,n,o,r){const d=(0,t.up)("select-field"),i=(0,t.up)("form-field");return(0,t.wg)(),(0,t.j4)(i,{label:e.label||"Тип запиту",error:e.error},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{options:e.types,name:"callback_type","input-placeholder":"Оберіть тип запиту","search-placeholder":"Введіть тип запиту","model-value":e.modelValue,"onUpdate:modelValue":e.select,"has-search":!1},null,8,["options","model-value","onUpdate:modelValue"])])),_:1},8,["label","error"])}var o=l(4560),r=l(6112),d=(0,t.aZ)({props:{modelValue:String,label:String,error:String},emits:["update:modelValue"],components:{FormField:o.Z,SelectField:r.Z},data(){return{types:[{value:"POST",label:"POST"},{value:"GET",label:"GET"}]}},methods:{select(e){this.$emit("update:modelValue",e)}}}),i=l(89);const u=(0,i.Z)(d,[["render",n]]);var s=u},4887:function(e,a,l){l.d(a,{Z:function(){return s}});var t=l(3396);function n(e,a,l,n,o,r){const d=(0,t.up)("select-field"),i=(0,t.up)("form-field");return(0,t.wg)(),(0,t.j4)(i,{label:e.label||"Тип запиту",error:e.error},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{options:e.types,name:"callback_req_type","input-placeholder":"Оберіть тип запиту","search-placeholder":"Введіть тип запиту","model-value":e.modelValue,"onUpdate:modelValue":e.select,"has-search":!1},null,8,["options","model-value","onUpdate:modelValue"])])),_:1},8,["label","error"])}var o=l(4560),r=l(6112),d=(0,t.aZ)({props:{modelValue:String,label:String,error:String},emits:["update:modelValue"],components:{FormField:o.Z,SelectField:r.Z},data(){return{types:[{value:"json",label:"JSON"},{value:"xml",label:"XML"},{value:"x-www-form",label:"X-WWW-FORM"}]}},methods:{select(e){this.$emit("update:modelValue",e)}}}),i=l(89);const u=(0,i.Z)(d,[["render",n]]);var s=u},6615:function(e,a,l){l.r(a),l.d(a,{default:function(){return B}});var t=l(3396);function n(e,a,l,n,o,r){const d=(0,t.up)("app-loading"),i=(0,t.up)("offline-terminal-form"),u=(0,t.up)("app-layout");return(0,t.wg)(),(0,t.j4)(u,null,(0,t.Nv)({appTitle:(0,t.w5)((()=>[(0,t.Uk)("Активація термінала")])),appLoading:(0,t.w5)((()=>[(0,t.Wm)(d,{loading:e.loading},null,8,["loading"])])),appContent:(0,t.w5)((()=>[(0,t.Wm)(i,{showTerminalName:!0,configData:e.configData,"actions-fixed":!0},null,8,["configData"])])),_:2},[e.canEdit?void 0:{name:"appSubtitle",fn:(0,t.w5)((()=>[(0,t.Uk)("Ви не маєте прав для редагування налаштувань терміналу")])),key:"0"}]),1024)}var o=l(5627),r=l(7139);const d={key:0,class:"terminal-form__container"},i={class:"checkbox-container"},u=(0,t._)("br",null,null,-1),s={class:"checkbox-container"};function m(e,a,l,n,o,m){const c=(0,t.up)("input-field"),p=(0,t.up)("form-field"),_=(0,t.up)("checkbox-field"),f=(0,t.up)("alloc-type-field"),h=(0,t.up)("password-field"),V=(0,t.up)("form-title"),y=(0,t.up)("textarea-field"),g=(0,t.up)("payload-field"),w=(0,t.up)("sign-stract-field"),b=(0,t.up)("request-method-select"),v=(0,t.up)("request-type-select"),E=(0,t.up)("v-button"),U=(0,t.up)("v-protected"),R=(0,t.up)("v-form");return Boolean(this.configData)?((0,t.wg)(),(0,t.iD)("div",d,[(0,t.Wm)(R,{action:"#",class:"terminal-form",schema:e.activateTerminalSchema,"initial-values":e.initialValues,onSubmit:e.activeTerminal},{fields:(0,t.w5)((({values:a,errors:l})=>[(0,t.Wm)(p,{label:"ID терміналу",error:l.id},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:a.id,"onUpdate:modelValue":e=>a.id=e,name:"id",type:"text",placeholder:"Введіть id термінала"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["error"]),e.showTerminalName?((0,t.wg)(),(0,t.j4)(p,{key:0,label:"Назва терміналу"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,name:"name",type:"text",placeholder:"Введіть назву термінала"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)):(0,t.kq)("",!0),(0,t._)("div",i,[(0,t.Wm)(p,null,{hint:(0,t.w5)((()=>[(0,t.Uk)(" У всіх нових терміналах буде дозволена робота в режимі offline ")])),default:(0,t.w5)((()=>[(0,t.Wm)(_,{name:"is_default_offline",modelValue:a.is_default_offline,"onUpdate:modelValue":e=>a.is_default_offline=e,label:"Оффлайн"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)]),(0,t.Wm)(p,{label:"Максимальна сума для оффлайн платежу"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:a.max_offline_sum,"onUpdate:modelValue":e=>a.max_offline_sum=e,name:"max_offline_sum",type:"number",placeholder:"Введіть максимальну суму для оффлайн платежу"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(f,{modelValue:a.allocation_type,"onUpdate:modelValue":e=>a.allocation_type=e},null,8,["modelValue","onUpdate:modelValue"]),"1"===a.allocation_type?((0,t.wg)(),(0,t.j4)(p,{key:1,label:"Ідентифікатор ПТКС",error:l.ptks_num},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:a.ptks_num,"onUpdate:modelValue":e=>a.ptks_num=e,name:"ptks_num",type:"number",placeholder:"Введіть ідентифікатор ПТКС"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["error"])):(0,t.kq)("",!0),(0,t.Wm)(p,{label:"Secret Key (підпис HmacSHA256)",error:l.secret_key},{hint:(0,t.w5)((()=>[(0,t.Uk)(" Потрібне для підпису запитів зі сторони клієнтів (наприклад запит статусу транзакції) ")])),default:(0,t.w5)((()=>[(0,t.Wm)(h,{name:"secrey_key",modelValue:a.secret_key,"onUpdate:modelValue":e=>a.secret_key=e,hasGenerateButton:!0,placeholder:"Введіть або згенеруйте"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["error"]),(0,t.Wm)(V,null,{title:(0,t.w5)((()=>[(0,t.Uk)("Ви можете отримувати результати транзакцій на свій backend. "),u,(0,t.Uk)(" Для цього заповніть поля нижче")])),_:1}),(0,t.Wm)(p,{label:"Endpoint для повідомлень про результати транзакцій"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:a.endpoint_result,"onUpdate:modelValue":e=>a.endpoint_result=e,name:"endpoint_result",placeholder:"Наприклад, https://example.com/callback"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(p,{label:"GET параметри для передачі"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:a.add_get,"onUpdate:modelValue":e=>a.add_get=e,name:"add_get",placeholder:"Наприклад, ?param_name=param_value"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(p,{label:"Headers запиту"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{modelValue:a.headers,"onUpdate:modelValue":e=>a.headers=e,name:"headers",placeholder:"Наприклад, Content-type: application/json; Host:example.it"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(g,{modelValue:a.payload,"onUpdate:modelValue":e=>a.payload=e},null,8,["modelValue","onUpdate:modelValue"]),(0,t.Wm)(w,{modelValue:a.sign_stract,"onUpdate:modelValue":e=>a.sign_stract=e},null,8,["modelValue","onUpdate:modelValue"]),(0,t.Wm)(b,{modelValue:a.req_type,"onUpdate:modelValue":e=>a.req_type=e,label:"Тип запиту зворотного виклику"},null,8,["modelValue","onUpdate:modelValue"]),(0,t.Wm)(v,{label:"Тип зворотного виклику",modelValue:a.callback_req_type,"onUpdate:modelValue":e=>a.callback_req_type=e,error:l.callback_req_type},null,8,["modelValue","onUpdate:modelValue","error"]),(0,t.Wm)(p,{label:"Час очікування картки, в секундах"},{hint:(0,t.w5)((()=>[(0,t.Uk)(" Час, який термінал очікує, що клієнт прикладе платіжний пристрій ")])),default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:a.card_wait,"onUpdate:modelValue":e=>a.card_wait=e,name:"card_wait",placeholder:"Наприклад, 30",type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t._)("div",s,[(0,t.Wm)(p,null,{hint:(0,t.w5)((()=>[(0,t.Uk)(" Робота на терміналі не почнеться, якщо не буде користувач не проведе авторизацію по відкриттю зміни ")])),default:(0,t.w5)((()=>[(0,t.Wm)(_,{modelValue:a.need_shift,"onUpdate:modelValue":e=>a.need_shift=e,name:"need_shift",label:"Необхідне відкриття зміни"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)]),(0,t.Wm)(p,{label:"Час синхронізації, в секундах"},{hint:(0,t.w5)((()=>[(0,t.Uk)(" Як часто термінал буде виходити на зв’язок з сервером для передачі та отримання даних ")])),default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:a.sync_period,"onUpdate:modelValue":e=>a.sync_period=e,name:"sync_period",placeholder:"Наприклад, 30",type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(p,{label:"Додаткова інформація"},{hint:(0,t.w5)((()=>[(0,t.Uk)(" Будь-які додаткові дані, які необхідні для роботи або інтеграції з іншими додатками, наприклад, токен для авторизації на сторонньому сервері. Їх можна отримувати на самому терміналі запитом /Config/get ")])),default:(0,t.w5)((()=>[(0,t.Wm)(y,{modelValue:a.add_data,"onUpdate:modelValue":e=>a.add_data=e,maxLength:1500,placeholder:"Введіть додадкову інформацію"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t._)("div",{class:(0,r.C_)(["form-actions",{"form-actions--fixed":e.actionsFixed}])},[(0,t.Wm)(U,{rule:e.Rules.ADD_TERMINAL},{content:(0,t.w5)((({canRender:a})=>[(0,t.Wm)(E,{type:"submit",loading:e.loading,fixed:"",disabled:!a},{text:(0,t.w5)((()=>[(0,t.Uk)("Активувати термінал")])),_:2},1032,["loading","disabled"])])),_:1},8,["rule"])],2)])),_:1},8,["schema","initial-values","onSubmit"])])):(0,t.kq)("",!0)}var c=l(4677),p=l(4560),_=l(2619),f=l(2729),h=l(6686),V=l(913),y=l(1225),g=l(4610),w=l(4856),b=l(2456),v=l(2446),E=l(1255),U=l(6235),R=l(2375),Z=l(5384),k=l(5375),D=l(4887),I=l(5577);const q={id:"",name:"",secret_key:"",max_offline_sum:0,is_default_offline:!1,is_for_all_card:!0,can_user_add_card:!1,endpoint_result:"",add_get:"",headers:"",payload:"",sign_stract:"",card_wait:30,req_type:"",need_shift:!1,sync_period:30,add_data:"",callback_req_type:"",allocation_type:"",ptks_num:""};var F=(0,t.aZ)({inject:["rules"],props:{actionsFixed:{type:Boolean,required:!1,default:!1},showTerminalName:{type:Boolean,required:!1,default:!1},configData:{type:Object,required:!1,default(){return q}},isActivateForm:{type:Boolean,required:!1,default:!1}},components:{FormField:p.Z,InputField:_.Z,CheckboxField:f.Z,TextareaField:h.Z,RequestTypeSelect:D.Z,RequestMethodSelect:k.Z,PayloadField:V.Z,VButton:g.Z,SignStractField:y.Z,VForm:w.Z,FormTitle:v.Z,PasswordField:E.Z,VProtected:b.Z,AllocTypeField:U.Z},setup(){const e=(0,c.pm)();return{toast:e,activateTerminalSchema:R.oh,Rules:I.i}},data(){return{canEdit:!1,canEditId:!1,initialValues:this.configData}},mounted(){const e=this.$route.query.id;this.initialValues={...this.$props.configData,id:e},this.canEdit=Boolean(null!==this.rules),this.canEditId=Boolean(e?.length)},watch:{configData(e){this.initialValues={...this.initialValues,...e}}},computed:{loading(){return this.$store.state.terminals.formLoading}},methods:{activeTerminal(e){this.$store.dispatch(Z.T.ACTIVATE_TERMINAL,{terminalConfig:e,toast:this.toast})}}}),W=l(89);const S=(0,W.Z)(F,[["render",m]]);var T=S,x=l(7863),L=(0,t.aZ)({inject:["rules"],components:{AppLayout:o.Z,AppLoading:x.Z,OfflineTerminalForm:T},data(){return{canEdit:!1}},computed:{loading(){return this.$store.state.terminals.loading},configData(){return this.$store.state.terminals.terminalConfig}},async mounted(){this.canEdit=Boolean(null!==this.rules),this.$store.dispatch(Z.T.GET_TERMINALS_REF),this.$store.dispatch(Z.T.GET_TERMINAL_CONFIG,{alloc_type:""})}});const $=(0,W.Z)(L,[["render",n]]);var B=$}}]);
//# sourceMappingURL=66.0810dca1.js.map