"use strict";(self["webpackChunkjust_sell"]=self["webpackChunkjust_sell"]||[]).push([[768],{2354:function(e,l,a){a.d(l,{m:function(){return t}});const t=e=>{const l=document.createElement("textarea");return l.innerHTML=e,l.value}},2729:function(e,l,a){a.d(l,{Z:function(){return h}});var t=a(3396),n=a(7139),o=a(9167);const d=["checked","name","disabled"],i={key:0,for:"#checkbox-field",class:"checkbox-field__label"},s={id:"checkbox-field",class:"checkbox-field__box"},u={key:0,src:o,alt:"Checked"},r={key:0,class:"form-field__error"},m=(0,t.aZ)({emits:["change","update:modelValue"],data(){return{checked:this.$props.modelValue}},computed:{hasError(){return Boolean(this.$props.error)}},watch:{modelValue:{handler(e){this.checked="string"===typeof e?JSON.parse(e):e},immediate:!0}},methods:{check(){this.checked=!this.checked,this.$emit("change",this.checked),this.$emit("update:modelValue",this.checked)}}});var c=(0,t.aZ)({...m,__name:"CheckboxField",props:{name:null,label:null,defaultChecked:{type:Boolean},direction:{default:"right"},variant:{default:"primary"},size:{default:"md"},modelValue:{type:Boolean},disabled:null,error:null,justify:{default:"space-between"}},setup(e){return(l,a)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("input",{type:"checkbox",class:"checkbox-field__input",checked:e.modelValue||l.checked,name:e.name,disabled:e.disabled},null,8,d),(0,t._)("div",{class:(0,n.C_)(["checkbox-field",{"checkbox-field--checked":l.checked,"checkbox-field--disabled":e.disabled,[`checkbox-field--${e.direction}`]:!0,[`checkbox-field--${e.variant}`]:!0,[`checkbox-field--${e.size}`]:!0}]),style:(0,n.j5)({justifyContent:"space-between"===e.justify?"space-between":"flex-start"}),onClick:a[0]||(a[0]=(...e)=>l.check&&l.check(...e))},[Boolean(e.label)?((0,t.wg)(),(0,t.iD)("label",i,(0,n.zw)(e.label),1)):(0,t.kq)("",!0),(0,t._)("div",s,[l.checked?((0,t.wg)(),(0,t.iD)("img",u)):(0,t.kq)("",!0)])],6),l.hasError?((0,t.wg)(),(0,t.iD)("div",r,(0,n.zw)(e.error),1)):(0,t.kq)("",!0)],64))}});const p=c;var h=p},2619:function(e,l,a){a.d(l,{Z:function(){return u}});var t=a(3396),n=a(7139);const o=["type","placeholder","name","required","value","disabled"],d=(0,t.aZ)({emits:["update:modelValue","blur"],methods:{input(e){const l=e.target?.value;this.$emit("update:modelValue",l)}}});var i=(0,t.aZ)({...d,__name:"InputField",props:{name:null,type:null,placeholder:null,required:{type:Boolean},size:{default:"lg"},variant:{default:"default"},modelValue:null,disabled:null},setup(e){return(l,a)=>((0,t.wg)(),(0,t.iD)("input",{type:e.type,placeholder:e.placeholder,name:e.name,required:e.required,class:(0,n.C_)([`form-field__input--${e.size} form-field__input--${e.variant}`,"form-field__input"]),value:e.modelValue,disabled:e.disabled,onInput:a[0]||(a[0]=e=>l.input(e)),onBlur:a[1]||(a[1]=e=>l.$emit("blur"))},null,42,o))}});const s=i;var u=s},6686:function(e,l,a){a.d(l,{Z:function(){return u}});var t=a(3396),n=a(7139);const o=["placeholder","name","required","value","disabled","maxlength"],d=(0,t.aZ)({emits:["update:modelValue","update:selection"],inject:["rules"],data(){return{canEdit:!1}},mounted(){this.canEdit=Boolean(null!==this.rules),document.addEventListener("selectionchange",this.onSelectionChange)},methods:{input(e){const l=e.target?.value;this.$emit("update:modelValue",l)},onTabPressed(e){const l=this.$refs.textarea;let a=e.target.value;if("Tab"==e.key){e.preventDefault();const t=l.selectionStart,n=l.selectionEnd;e.target.value=a.substring(0,t)+"\t"+a.substring(n),l.selectionStart=l.selectionEnd=t+1,this.$emit("update:modelValue",a)}},onSelectionChange(){const e=document.activeElement,l=this.$refs.textarea;if(e&&e===l){const l={start:e.selectionStart,end:e.selectionEnd};this.$emit("update:selection",l)}}}});var i=(0,t.aZ)({...d,__name:"TextareaField",props:{name:null,placeholder:null,required:{type:Boolean},size:{default:"lg"},variant:{default:"default"},modelValue:null,disabled:null,maxLength:null},setup(e){return(l,a)=>((0,t.wg)(),(0,t.iD)("textarea",{ref:"textarea",placeholder:e.placeholder,name:e.name,required:e.required,class:(0,n.C_)(["form-field__input form-field__textarea",`form-field__input--${e.size} form-field__input--${e.variant}`]),value:e.modelValue,disabled:void 0!==e.disabled?e.disabled:!l.canEdit,onInput:a[0]||(a[0]=e=>l.input(e)),onKeydown:a[1]||(a[1]=(...e)=>l.onTabPressed&&l.onTabPressed(...e)),maxlength:e.maxLength},null,42,o))}});const s=i;var u=s},913:function(e,l,a){a.d(l,{Z:function(){return _}});var t=a(3396),n=a(7139);const o={class:"hint-more"},d=(0,t._)("div",{class:"hint-more__title"}," Натисніть на потрібний елемент, щоб додати до шаблону ",-1),i=["onClick"];function s(e,l,a,s,u,r){const m=(0,t.up)("textarea-field"),c=(0,t.up)("form-field");return(0,t.wg)(),(0,t.j4)(c,{label:e.label||"Шаблон тіла запиту",error:e.error},{hint:(0,t.w5)((()=>[(0,t._)("div",o,[d,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.hint,(({name:l,message:a})=>((0,t.wg)(),(0,t.iD)("div",{key:l,class:(0,n.C_)(["hint-more__item",{"hint-more__item--selected":e.payload.includes(l)}]),onClick:a=>e.addTemplateElement(l)},[(0,t._)("span",null,(0,n.zw)(l)+" "+(0,n.zw)(a),1)],10,i)))),128)),(0,t._)("div",{class:"hint-more-btn",onClick:l[0]||(l[0]=l=>e.hintOpened=!e.hintOpened)},(0,n.zw)(e.hintOpened?"Показати меньше":"Показати більше"),1)])])),default:(0,t.w5)((()=>[(0,t.Wm)(m,{ref:"textarea","model-value":e.modelValue,"onUpdate:modelValue":e.input,"onUpdate:selection":e.changeSelection,name:"payload",placeholder:"Наприклад, \n  {\n    'status': ${status_code},\n    'error_msg':'${error_msg}',\n  }"},null,8,["model-value","onUpdate:modelValue","onUpdate:selection"])])),_:1},8,["label","error"])}var u=a(4560),r=a(6686),m=a(2354),c=(0,t.aZ)({props:{modelValue:String,label:String,error:String},emits:["update:modelValue"],data(){return{payload:"",hintOpened:!1,selectionStart:0,selectionEnd:0,hintMessages:[{name:"${transaction_id}",message:" - ідентифікатор платежу"},{name:"${pay_time}",message:" – час платежу"},{name:"${get_time}",message:" - час отримання"},{name:"${device_id}",message:" – ідентифікатор пристрою"},{name:"${pay_inst}",message:" - идентификатор платежа"},{name:"${pay_mask}",message:" – маска платежу"},{name:"${end_pay_time}",message:" - час закінчення платежу"},{name:"${transaction_type}",message:" – тип транзакції"},{name:"${amount}",message:" – кількість"},{name:"${ticket_num}",message:" – номер квитка"},{name:"${sign}",message:" – підпис"},{name:"${pan_mask}",message:"- маскований номер карти"},{name:"${code}",message:" - код результату транзакції"},{name:"${msg}",message:" - повідомлення коду помилки"},{name:"${rrn}",message:" - інтифікатор в системах МПС"},{name:"${is_test}",message:" - тип транзакції, тестова чи продова"}]}},mounted(){this.modelValue&&(this.payload=this.modelValue)},computed:{hint(){return this.hintOpened?this.hintMessages:this.hintMessages.slice(0,3)}},watch:{payload(e){const l=(0,m.m)(e);this.payload=(0,m.m)(e),this.$emit("update:modelValue",l)}},methods:{input(e){this.payload=e},addTemplateElement(e){this.payload.includes(e)?this.payload=this.payload.replace(e,""):(this.payload.substring(this.selectionEnd,this.payload.length),this.payload=this.payload.substring(0,this.selectionStart)+e+this.payload.substring(this.selectionEnd,this.payload.length)),this.$emit("update:modelValue",this.payload)},changeSelection(e){this.selectionStart=e.start,this.selectionEnd=e.end}},components:{FormField:u.Z,TextareaField:r.Z}}),p=a(89);const h=(0,p.Z)(c,[["render",s]]);var _=h},5375:function(e,l,a){a.d(l,{Z:function(){return r}});var t=a(3396);function n(e,l,a,n,o,d){const i=(0,t.up)("select-field"),s=(0,t.up)("form-field");return(0,t.wg)(),(0,t.j4)(s,{label:e.label||"Тип запиту",error:e.error},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{options:e.types,name:"callback_type","input-placeholder":"Оберіть тип запиту","search-placeholder":"Введіть тип запиту","model-value":e.modelValue,"onUpdate:modelValue":e.select,"has-search":!1},null,8,["options","model-value","onUpdate:modelValue"])])),_:1},8,["label","error"])}var o=a(4560),d=a(6112),i=(0,t.aZ)({props:{modelValue:String,label:String,error:String},emits:["update:modelValue"],components:{FormField:o.Z,SelectField:d.Z},data(){return{types:[{value:"POST",label:"POST"},{value:"GET",label:"GET"}]}},methods:{select(e){this.$emit("update:modelValue",e)}}}),s=a(89);const u=(0,s.Z)(i,[["render",n]]);var r=u},3013:function(e,l,a){a.d(l,{Z:function(){return m}});var t=a(3396);const n=(0,t._)("p",null,[(0,t.Uk)(" Параметр вказує, як будуть застосовуватись налаштування то терміналів. "),(0,t._)("br"),(0,t._)("br"),(0,t._)("b",null,"Всі термінали"),(0,t.Uk)(" – вказані параметри автоматично застосовуються для всіх нових терміналів. "),(0,t._)("br"),(0,t._)("b",null,"Кожний термінал окремо"),(0,t.Uk)(" – вказані параметри не застосовуються до нових терміналів. Кожний термінал налаштовуються окремо ")],-1);function o(e,l,a,o,d,i){const s=(0,t.up)("select-field"),u=(0,t.up)("form-field");return(0,t.wg)(),(0,t.j4)(u,{label:"Тип налаштування",error:e.error},{hint:(0,t.w5)((()=>[n])),default:(0,t.w5)((()=>[(0,t.Wm)(s,{options:e.settings,name:"settings","input-placeholder":"Оберіть тип налаштування","search-placeholder":"Введіть тип налаштування","has-search":!1,"model-value":e.modelValue,"onUpdate:modelValue":e.select},null,8,["options","model-value","onUpdate:modelValue"])])),_:1},8,["error"])}var d=a(4560),i=a(6112),s=(0,t.aZ)({props:{modelValue:String,error:String},emits:["update:modelValue"],components:{FormField:d.Z,SelectField:i.Z},computed:{settings(){const e=this.$store.state.terminals.terminalsRef;return e?e.offline_settings.map((e=>({value:e.id.toString(),label:e.name||""}))):[]}},methods:{select(e){this.$emit("update:modelValue",e)}}}),u=a(89);const r=(0,u.Z)(s,[["render",o]]);var m=r},1297:function(e,l,a){a.d(l,{Z:function(){return r}});var t=a(3396);function n(e,l,a,n,o,d){const i=(0,t.up)("select-field"),s=(0,t.up)("form-field");return(0,t.wg)(),(0,t.j4)(s,{label:"Тип синхронізації",error:e.error},{hint:(0,t.w5)((()=>[(0,t.Uk)(" Дає змогу налаштувати синхронізацію чорних списків (банківські карти по яким не пройшла оплата) між учасниками системи JustSell ")])),default:(0,t.w5)((()=>[(0,t.Wm)(i,{options:e.syncTypes,name:"syncTypes","input-placeholder":"Оберіть тип синхронізації","search-placeholder":"Введіть тип синхронізації","has-search":!1,"model-value":e.modelValue,"onUpdate:modelValue":e.select},null,8,["options","model-value","onUpdate:modelValue"])])),_:1},8,["error"])}var o=a(4560),d=a(6112),i=(0,t.aZ)({props:{modelValue:String,error:String},emits:["update:modelValue"],components:{FormField:o.Z,SelectField:d.Z},computed:{syncTypes(){const e=this.$store.state.terminals.terminalsRef;return e?e.sync_type.map((e=>({value:e.id.toString(),label:e.name||""}))):[]}},methods:{select(e){this.$emit("update:modelValue",e)}}}),s=a(89);const u=(0,s.Z)(i,[["render",n]]);var r=u},8768:function(e,l,a){a.r(l),a.d(l,{default:function(){return F}});var t=a(3396);function n(e,l,a,n,o,d){const i=(0,t.up)("app-loading"),s=(0,t.up)("terminal-form"),u=(0,t.up)("app-layout");return(0,t.wg)(),(0,t.j4)(u,null,{appTitle:(0,t.w5)((()=>[(0,t.Uk)(" Додати термінал ")])),appContent:(0,t.w5)((()=>[(0,t.Wm)(i,{loading:e.loading},null,8,["loading"]),e.loading?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(s,{key:0}))])),_:1})}var o=a(5627),d=a(7139);const i={class:"checkbox-container"},s={class:"checkbox-container"},u={class:"checkbox-container"};function r(e,l,a,n,o,r){const m=(0,t.up)("input-field"),c=(0,t.up)("form-field"),p=(0,t.up)("settings-select"),h=(0,t.up)("checkbox-field"),_=(0,t.up)("textarea-field"),f=(0,t.up)("payload-field"),g=(0,t.up)("sign-stract-field"),V=(0,t.up)("request-type-select"),b=(0,t.up)("synctype-select"),y=(0,t.up)("v-button"),v=(0,t.up)("v-form");return(0,t.wg)(),(0,t.j4)(v,{"class-names":"terminal-form","initial-values":e.initialValues,onSubmit:e.submitPassword},{fields:(0,t.w5)((({values:l})=>[(0,t.Wm)(c,{label:"ID терміналу"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:l.id,"onUpdate:modelValue":e=>l.id=e,name:"name",type:"text",placeholder:"Введіть id термінала"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(c,{label:"Назва терміналу"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:l.name,"onUpdate:modelValue":e=>l.name=e,name:"name",type:"text",placeholder:"Введіть назву термінала"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(p,{modelValue:l.settings,"onUpdate:modelValue":e=>l.settings=e},null,8,["modelValue","onUpdate:modelValue"]),(0,t.Wm)(c,{label:"Максимальна сума для оффлайн платежу"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:l.max_offline_sum,"onUpdate:modelValue":e=>l.max_offline_sum=e,name:"max_offline_sum",type:"number",placeholder:"Введіть максимальну суму для оффлайн платежу"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t._)("div",i,[(0,t.Wm)(h,{name:"is_default_offline",modelValue:l.is_default_offline,"onUpdate:modelValue":e=>l.is_default_offline=e,label:"Оффлайн"},null,8,["modelValue","onUpdate:modelValue"])]),(0,t.Wm)(c,{label:"Endpoint для повідомлень про результати транзакцій"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:l.endpoint_result,"onUpdate:modelValue":e=>l.endpoint_result=e,name:"endpoint_result",placeholder:"Наприклад, https://example.com/callback"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(c,{label:"GET параметри для передачі"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:l.add_get,"onUpdate:modelValue":e=>l.add_get=e,name:"add_get",placeholder:"Наприклад, ?param_name=param_value"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(c,{label:"headers запиту"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{modelValue:l.headers,"onUpdate:modelValue":e=>l.headers=e,name:"headers",placeholder:"Наприклад, Content-type: application/json; Host:example.it"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(f,{modelValue:l.payload,"onUpdate:modelValue":e=>l.payload=e},null,8,["modelValue","onUpdate:modelValue"]),(0,t.Wm)(g,{modelValue:l.sign_stract,"onUpdate:modelValue":e=>l.sign_stract=e},null,8,["modelValue","onUpdate:modelValue"]),(0,t.Wm)(V,{modelValue:l.req_type,"onUpdate:modelValue":e=>l.req_type=e},null,8,["modelValue","onUpdate:modelValue"]),(0,t.Wm)(c,{label:"Час очікування картки, в секундах"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:l.card_wait,"onUpdate:modelValue":e=>l.card_wait=e,name:"card_wait",placeholder:"Наприклад, 30",type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(b,{modelValue:l.sync_type,"onUpdate:modelValue":e=>l.sync_type=e},null,8,["modelValue","onUpdate:modelValue"]),(0,t._)("div",s,[(0,t.Wm)(h,{modelValue:l.need_shift,"onUpdate:modelValue":e=>l.need_shift=e,name:"need_shift",label:"Необхідне відкриття зміни"},null,8,["modelValue","onUpdate:modelValue"])]),(0,t.Wm)(c,{label:"Час синхронізації, в секундах"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:l.sync_period,"onUpdate:modelValue":e=>l.sync_period=e,name:"sync_period",placeholder:"Наприклад, 30",type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t._)("div",u,[(0,t.Wm)(h,{modelValue:l.update_all_term,"onUpdate:modelValue":e=>l.update_all_term=e,name:"need_shift",label:"Оновити всі термінали"},null,8,["modelValue","onUpdate:modelValue"])]),(0,t._)("div",{class:(0,d.C_)(["form-actions",{"form-actions--fixed":e.actionsFixed}])},[e.canEdit?((0,t.wg)(),(0,t.j4)(y,{key:0,type:"button",loading:e.loading,onClick:e.sendConfig},{text:(0,t.w5)((()=>[(0,t.Uk)("Додати налаштування термінала")])),_:1},8,["loading","onClick"])):(0,t.kq)("",!0),(0,t.Wm)(y,{type:"button",loading:e.loading,onClick:e.activeTerminal,fixed:""},{text:(0,t.w5)((()=>[(0,t.Uk)("Додати термінал")])),_:1},8,["loading","onClick"])],2)])),_:1},8,["initial-values","onSubmit"])}var m=a(4856),c=a(4560),p=a(2619),h=a(2729),_=a(6686),f=a(913),g=a(4610),V=a(5384),b=a(3013),y=a(5375),v=a(1297),k=a(4677);const w=e=>({id:e,name:"Name",settings:"",max_offline_sum:0,is_default_offline:!1,is_for_all_card:!0,can_user_add_card:!1,endpoint_result:"",add_get:"",headers:"",payload:"",sign_stract:"",card_wait:30,req_type:"",need_shift:!1,sync_type:"",sync_period:30,update_all_term:!1});var x=(0,t.aZ)({inject:["rules"],props:{actionsFixed:{type:Boolean,required:!1,default:!1}},components:{FormField:c.Z,InputField:p.Z,CheckboxField:h.Z,TextareaField:_.Z,RequestTypeSelect:y.Z,PayloadField:f.Z,SettingsSelect:b.Z,VButton:g.Z,SynctypeSelect:v.Z,VForm:m.Z},setup(){const e=(0,k.pm)();return{toast:e}},data(){return{initialValues:w("")}},mounted(){const e=this.$route.query.id;this.initialValues=w(e||"")},computed:{loading(){return this.$store.state.terminals.formLoading}},methods:{sendConfig(){this.$store.dispatch(V.T.CREATE_OFFLINE_TERMINAL,this.$props.configData)}}}),U=a(89);const $=(0,U.Z)(x,[["render",r]]);var Z=$,S=a(7863),W=(0,t.aZ)({components:{AppLayout:o.Z,AppLoading:S.Z,TerminalForm:Z},computed:{loading(){return this.$store.state.terminals.loading}},mounted(){this.$store.dispatch(V.T.GET_TERMINALS_REF)}});const E=(0,U.Z)(W,[["render",n]]);var F=E},9167:function(e,l,a){e.exports=a.p+"img/check-icon.972bc3c4.svg"}}]);
//# sourceMappingURL=768.7add0f6f.js.map